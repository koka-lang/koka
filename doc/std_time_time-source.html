<!DOCTYPE html>
<html>
<!-- NO_CLICK_TRACKING -->

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>time.kk documentation</title>
</head>

<body class="koka doc body"><div class="madoko">
<pre class="koka source"><span class="comment">/&#42;----------------------------------------------------------------------------
   Copyright (C) 2012-2016 Microsoft Corporation
    
   Licensed under the Apache License, Version 2.0 ("The Licence"). You may not
   use this file except in compliance with the License. A copy of the License
   can be found in the file "license.txt" at the root of this distribution.
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Time represents instants as human readable calendar time.

  A &#96;:time&#96; represents an &#96;:instant&#96; in time in a given &#96;:calendar&#96; and &#96;:timezone&#96;
  as a "human" calendar time. Months, days etc. are always 1-based.  
&#42;/</span>
<span class="kw">module</span> time

<span class="kw">import</span> ddouble
<span class="kw">import</span> timestamp
<span class="kw">import</span> duration
<span class="kw">import</span> instant
<span class="kw">import</span> utc
<span class="kw">import</span> date
<span class="kw">import</span> calendar
<span class="kw">import</span> chrono

<span class="comment">// Represents an instant in time for a certain calendar and timezone.
</span><span class="decl-type" id="type_space_time"><span class="kw">abstract</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Time"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> (
  <span class="comment">// The year.
</span>  <span class="kw">public</span>  <span class="decl-fun" id="date"><a class="pp">date<span class="pc">date: <span class="tp">date</span></span></a></span>    <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_date"><span class="tp">date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>date: <span class="tp">V</span></span></a>,
  <span class="kw">public</span>  <span class="decl-fun" id="clock"><a class="pp">clock<span class="pc">clock: <span class="tp">clock</span></span></a></span>   <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_clock"><span class="tp">clock</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock: <span class="tp">V</span></span></a>,
  <span class="kw">public</span>  <span class="decl-fun" id="calendar"><a class="pp">calendar<span class="pc">calendar: <span class="tp">calendar</span></span></a></span><span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#type_space_calendar"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>calendar: <span class="tp">V</span></span></a>,
  <span class="kw">public</span>  <span class="decl-fun" id="tzdelta"><a class="pp">tzdelta<span class="pc">tzdelta: <span class="tp">duration</span></span></a></span> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>zero: <span class="tp">duration</span></span></a>,
  <span class="kw">public</span>  <span class="decl-fun" id="tzabbrv"><a class="pp">tzabbrv<span class="pc">tzabbrv: <span class="tp">string</span></span></a></span> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>   <span class="kw">=</span> <span class="st">""</span>,
  <span class="kw">public</span>  <span class="decl-fun" id="timezone"><a class="pp">timezone<span class="pc">timezone: <span class="tp">timezone</span></span></a></span><span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#type_space_timezone"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>timezone: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#tz_utc">tz-utc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>utc: <span class="tp">timezone</span></span></a>,
  <span class="kw">public</span>  <span class="decl-fun" id="instant"><a class="pp">instant<span class="pc">instant: <span class="tp">instant</span></span></a></span> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a>
</span></span>)

<span class="comment">// Return the year of a &#96;:time&#96;.
</span><span class="decl-fun" id="year"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">date</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="comment">// Return the month of a &#96;:time&#96;. (starting at 1)
</span><span class="decl-fun" id="month"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#month">month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#month">month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>month: <span class="tp sp">(</span><span class="tp tpp">date</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="comment">// Return the day of the month of a &#96;:time&#96;. (starting at 1)
</span><span class="decl-fun" id="day"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#day">day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>day: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#day">day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>day: <span class="tp sp">(</span><span class="tp tpp">date</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="comment">// Return the whole hours of a &#96;:time&#96;. 
</span><span class="decl-fun" id="hours"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#hours">hours<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>hours: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#clock">clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>clock: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#hours">hours<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>hours: <span class="tp sp">(</span><span class="tp tpp">clock</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="comment">// Return the whole minutes of a &#96;:time&#96;. 
</span><span class="decl-fun" id="minutes"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#minutes">minutes<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>minutes: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#clock">clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>clock: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#minutes">minutes<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>minutes: <span class="tp sp">(</span><span class="tp tpp">clock</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="comment">// Return the fractional seconds of a &#96;:time&#96;. 
</span><span class="decl-fun" id="seconds"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#seconds">seconds<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>seconds: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_timestamp-source.html#type_space_timespan"><span class="tp">timespan</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#clock">clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>clock: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#seconds">seconds<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>seconds: <span class="tp sp">(</span><span class="tp tpp">clock</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>
</span>}

<span class="comment">// Compare two &#96;:time&#96;s. Compares the actual instants in time
// and can thus compare across calendars and timezones.\
// &#96;time(2001,7,2,tz=tz-fixed("GMT+1",duration(3600))) &gt; time(2001,7,1,23,30,0)&#96; &amp;quad; (&#96;False&#96;!)
</span><span class="decl-fun" id="compare"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">t1</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">t2</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>( <a class="pp">t1<span class="pc">t1: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">t2<span class="pc">t2: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_order"><span class="tp">order</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>order: <span class="tp">V</span></span></a> {
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">t1<span class="pc">t1: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>,<a class="pp">t2<span class="pc">t2: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>)
</span>}  

<span class="decl-fun" id="_lt_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#_lt_">(&lt;)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(&lt;): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> )  <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">t1</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">t2</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_lt__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#_lt__eq_">(&lt;=)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(&lt;=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">t1</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">t2</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_gt_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#_gt_">(&gt;)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(&gt;): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> )  <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">t1</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">t2</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_gt__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#_gt__eq_">(&gt;=)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">t1</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">t2</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_eq__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#_eq__eq_">(==)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">t1</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">t2</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_excl__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#_excl__eq_">(!=)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(!=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">t1</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">t2</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> </span>}

<span class="comment">// The minimum of two times (as by their actual instant in time)
</span><span class="decl-fun" id="min"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#min">min<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>min: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">i</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="#_lt__eq_">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(&lt;=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a>) <span class="kw">then</span> <a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a> <span class="kw">else</span> <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a>
</span>}

<span class="comment">// The maximum of two times (as by their actual instant in time)
</span><span class="decl-fun" id="max"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#max">max<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>max: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">i</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="#_gt__eq_">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a>) <span class="kw">then</span> <a class="pp">i<span class="pc">i: <span class="tp">time</span></span></a> <span class="kw">else</span> <a class="pp">j<span class="pc">j: <span class="tp">time</span></span></a>
</span>}


<span class="comment">// Round a time to a specified second precision.
</span><span class="decl-fun" id="round_to_prec"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">prec</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">time</span></span></a> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a>
  <span class="kw">val</span> <a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a>    <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#clock">clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>clock: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a>
  <span class="kw">val</span> <a class="pp">secs<span class="pc">secs: <span class="tp">ddouble</span></span></a> <span class="kw">=</span> <a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#seconds">seconds<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>seconds: <span class="tp sp">(</span><span class="tp tpp">clock</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)
  <span class="kw">val</span> <a class="pp">ri<span class="pc">ri: <span class="tp">instant</span></span></a>   <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#use">use<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#timescale">timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>timescale: <span class="tp sp">(</span><span class="tp tpp">calendar</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)
  <span class="comment">// trace("time.round-to-prec: " + t.showx + ", t.seconds: " + t.seconds.show + ", secs: " + secs.show)
</span>  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">secs</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#seconds">seconds<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>seconds: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>) <span class="kw">then</span> {
    <span class="comment">// whole seconds stay the same, just update with the rounded seconds and instant
</span>    <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a>(clock<span class="kw">=</span><a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a>(seconds<span class="kw">=</span><a class="pp">secs<span class="pc">secs: <span class="tp">ddouble</span></span></a>), instant <span class="kw">=</span> <a class="pp">ri<span class="pc">ri: <span class="tp">instant</span></span></a>)
  } 
  <span class="kw">else</span> {
    <span class="comment">// otherwise recalculate the time from the rounded instant
</span>    <a class="pp">ri<span class="pc">ri: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="#time">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>,<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a>)
  } 
</span>}

<span class="comment">// Show a &#96;:time&#96; in [ISO 8601](https://en.wikipedia.org/wiki/ISO&#95;8601) format.
</span><span class="decl-fun" id="show"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">9</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">tp<span class="pc">tp: <span class="tp">time</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)
  <a class="pp">tp<span class="pc">tp: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#showx">showx<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>showx: <span class="tp sp">(</span><span class="tp tpp">tp</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)
</span>}

<span class="decl-fun" id="showx"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#showx">showx<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>showx: <span class="tp sp">(</span><span class="tp tpp">tp</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">tp<span class="pc">tp: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">9</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp">tp<span class="pc">tp: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">month<span class="dash">-</span>prefix</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">tp<span class="pc">tp: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#month_prefix">month-prefix<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>month<span class="dash">-</span>prefix: <span class="tp sp">(</span><span class="tp tpp">calendar</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)
   <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">"T"</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">tp<span class="pc">tp: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#clock">clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>clock: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#show_1">show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>show<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)
   <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="#show_tzdelta">show-tzdelta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>show<span class="dash">-</span>tzdelta: <span class="tp sp">(</span><span class="tp tpp">delta</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">utc</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">hmsep</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">hrwidth</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">tp<span class="pc">tp: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#tzdelta">tzdelta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>tzdelta: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> ) 
   <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">tp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#tzabbrv">tzabbrv<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>tzabbrv: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#numeric_ques_">numeric?<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>numeric?: <span class="tp sp">(</span><span class="tp tpp">abbrv</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">""</span> <span class="kw">else</span> <span class="st">" ("</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">tp<span class="pc">tp: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#tzabbrv">tzabbrv<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>tzabbrv: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">")"</span>) 
   <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">tp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">calendar</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#empty_ques__1">empty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>empty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">tp<span class="pc">tp: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#month_prefix">month-prefix<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>month<span class="dash">-</span>prefix: <span class="tp sp">(</span><span class="tp tpp">calendar</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#notempty_ques__1">notempty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>notempty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">""</span> <span class="kw">else</span> <span class="st">" "</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">tp<span class="pc">tp: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>name: <span class="tp sp">(</span><span class="tp tpp">calendar</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)
</span>}

<span class="decl-fun" id="numeric_ques_"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#numeric_ques_">numeric?<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>numeric?: <span class="tp sp">(</span><span class="tp tpp">abbrv</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">abbrv<span class="pc">abbrv: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  (<a class="pp">abbrv<span class="pc">abbrv: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#empty_ques__1">empty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>empty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">abbrv<span class="pc">abbrv: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#head_3">head<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>head<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__3">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="st">"+"</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">abbrv<span class="pc">abbrv: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#head_3">head<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>head<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__3">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="st">"-"</span>)
</span>}

<span class="decl-fun" id="show_date"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#show_date">show-date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>show<span class="dash">-</span>date: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_date"><span class="tp">date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>date: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">month<span class="dash">-</span>prefix</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
</span>}

<span class="comment">// Show a time zone delta. 
// Optional &#96;utc&#96; for displaying a zero timezone delta (=&#96;"Z"&#96;).
// Optional &#96;hmsep&#96; for the hour-minute separator (=&#96;":"&#96;).
// Optional &#96;hrwidth&#96; to give the minimal width of the hour field (=&#96;2&#96;).
</span><span class="decl-fun" id="show_tzdelta"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#show_tzdelta">show-tzdelta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>show<span class="dash">-</span>tzdelta: <span class="tp sp">(</span><span class="tp tpp">delta</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">utc</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">hmsep</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">hrwidth</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">delta<span class="pc">delta: <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a>, <a class="pp">utc<span class="pc">utc: <span class="tp op">?</span><span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="st">"Z"</span>, <a class="pp">hmsep<span class="pc">hmsep: <span class="tp op">?</span><span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="st">":"</span>, <a class="pp">hrwidth<span class="pc">hrwidth: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">2</span>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">dt<span class="pc">dt: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">delta<span class="pc">delta: <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#seconds">seconds<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>seconds: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">nonfin</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">dt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">string</span></span></a> <a class="pp">utc<span class="pc">utc: <span class="tp">string</span></span></a>
  <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">mins<span class="pc">mins: <span class="tp">int</span></span></a>,<a class="pp">secs<span class="pc">secs: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#divmod">divmod<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>divmod: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>(<a class="pp">dt<span class="pc">dt: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<span class="number">60</span>)
  <span class="kw">val</span> <a class="pp">tz<span class="pc">tz: <span class="tp">string</span></span></a>   <span class="kw">=</span> (<span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">dt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">"-"</span> <span class="kw">else</span> <span class="st">"+"</span>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<a class="pp">mins<span class="pc">mins: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">60</span>)<span class="kw op">.</span><a class="pp" href="#show0">show0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>show0: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">width</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">hrwidth<span class="pc">hrwidth: <span class="tp">int</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">hmsep<span class="pc">hmsep: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<a class="pp">mins<span class="pc">mins: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_perc_">%<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(%): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">60</span>)<span class="kw op">.</span><a class="pp" href="#show0">show0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>show0: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">width</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
  <span class="kw">val</span> <a class="pp">tzs<span class="pc">tzs: <span class="tp">string</span></span></a>  <span class="kw">=</span> <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">secs</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">""</span> <span class="kw">else</span> <span class="st">":"</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">secs<span class="pc">secs: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="#show0">show0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>show0: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">width</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
  <a class="pp">tz<span class="pc">tz: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">tzs<span class="pc">tzs: <span class="tp">string</span></span></a>
</span>}


<span class="comment">// pad with zeros
</span><span class="decl-fun" id="show0"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#show0">show0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>show0: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">width</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">width<span class="pc">width: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">2</span>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show_1">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pad_left">pad-left<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pad<span class="dash">-</span>left: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">width</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fill</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">width<span class="pc">width: <span class="tp">int</span></span></a>,<span class="st">'0'</span>)
</span>}


<span class="comment">/&#42;----------------------------------------------------------------------------
  Convenience functions over time
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">// Convert an &#96;:instant&#96; to a &#96;:time&#96; value in a given timezone &#96;tz&#96; (=&#96;tz-utc&#96; by default)
// and calendar (=&#96;cal-iso&#96; by default).
</span><span class="decl-fun" id="time"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#time">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a>, <a class="pp">tz<span class="pc">tz: <span class="tp op">?</span><span class="tp">timezone</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#tz_utc">tz-utc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>utc: <span class="tp">timezone</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#cal_iso">cal-iso<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>cal<span class="dash">-</span>iso: <span class="tp">calendar</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a> <span class="kw">=</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#use">use<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#timescale">timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>timescale: <span class="tp sp">(</span><span class="tp tpp">calendar</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>) <span class="comment">// minimize number of conversions
</span>  <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__comma__comma__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,,,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">thd</span> <span class="tp kw op">:</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tpp">field4</span> <span class="tp kw op">:</span> <span class="tp tv">d</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span></span></a><a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a>,<a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a>,<a class="pp">tzdelta<span class="pc">tzdelta: <span class="tp">duration</span></span></a>,<a class="pp">tzabbrv<span class="pc">tzabbrv: <span class="tp">string</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__comma__comma__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,,,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">thd</span> <span class="tp kw op">:</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tpp">field4</span> <span class="tp kw op">:</span> <span class="tp tv">d</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#instant_dc">instant-dc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>instant<span class="dash">-</span>dc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">date</span><span class="tp sp">,</span> <span class="tp">clock</span><span class="tp sp">,</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span></span></a>(<a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a>,<a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>,<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>)
  <a class="pp" href="#con_space_Time"><span class="co">Time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>Time: <span class="tp sp">(</span><span class="tp tpp">date</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">clock</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">calendar</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">,</span> <span class="tp tpp">tzdelta</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">tzabbrv</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">timezone</span> <span class="tp kw op">:</span> <span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">instant</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a>,<a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a>,<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>,<a class="pp">tzdelta<span class="pc">tzdelta: <span class="tp">duration</span></span></a>,<a class="pp">tzabbrv<span class="pc">tzabbrv: <span class="tp">string</span></span></a>,<a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>,<a class="pp">j<span class="pc">j: <span class="tp">instant</span></span></a>)
</span>}

<span class="comment">// Convert a &#96;:time&#96; &#96;t&#96; to a new &#96;:time&#96; value in a potentially different 
// timezone &#96;tz&#96; (=&#96;t.timezone&#96; by default) and calendar (=&#96;t.calendar&#96; by default).
</span><span class="decl-fun" id="time_1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#time_1">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">tz<span class="pc">tz: <span class="tp op">?</span><span class="tp">timezone</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp" href="#time">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>,<a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>,<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>)
</span>}

<span class="comment">/&#42; Return the &#96;:time&#96; value for a given date and clock in a timezone &#96;tz&#96; (=&#96;tz-utc&#96; by default) 
interpreted by calendar &#96;cal&#96; (=&#96;cal-iso&#96;). 

The &#96;month&#96;, &#96;day&#96;, &#96;hour&#96;, &#96;minutes&#96; may be outside their usual ranges 
and will be normalized during the conversion. For example, January 33 converts to February 2.
This makes it very easy to add- or subtract days or months to an existing time.
When the &#96;seconds&#96; or fraction of seconds &#96;frac&#96; add up over 60 those extra seconds are 
interpreted as leap seconds.

Due to timezone transitions, or leap seconds, it is possible to specify dates that never
happened (as it was skipped by a timezone change), or ambigious times (as a timezone springs back).
In such cases, the time is always interpreted in the earlier timezone.
&#42;/</span>
<span class="decl-fun" id="time_2"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#time_2">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hours</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">minutes</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">year<span class="pc">year: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">month<span class="pc">month: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">1</span>, <a class="pp">day<span class="pc">day: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">1</span>, 
                 <a class="pp">hours<span class="pc">hours: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0</span>, <a class="pp">minutes<span class="pc">minutes: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0</span>, <a class="pp">secs<span class="pc">secs: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0</span>, 
                 <a class="pp">frac<span class="pc">frac: <span class="tp op">?</span><span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0.0</span>, <a class="pp">tz<span class="pc">tz: <span class="tp op">?</span><span class="tp">timezone</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#tz_utc">tz-utc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>utc: <span class="tp">timezone</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#cal_iso">cal-iso<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>cal<span class="dash">-</span>iso: <span class="tp">calendar</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> 
{
  <a class="pp" href="#time">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#instant_1">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>instant<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hours</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">minutes</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">seconds</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">year<span class="pc">year: <span class="tp">int</span></span></a>,<a class="pp">month<span class="pc">month: <span class="tp">int</span></span></a>,<a class="pp">day<span class="pc">day: <span class="tp">int</span></span></a>,<a class="pp">hours<span class="pc">hours: <span class="tp">int</span></span></a>,<a class="pp">minutes<span class="pc">minutes: <span class="tp">int</span></span></a>,<a class="pp">secs<span class="pc">secs: <span class="tp">int</span></span></a>,<a class="pp">frac<span class="pc">frac: <span class="tp">double</span></span></a>,<a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>,<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>),<a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>,<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>)
</span>}


<span class="comment">// Return the &#96;:time&#96; value for a given &#96;:date&#96; and &#96;:clock&#96; (=&#96;clock0&#96;) in a timezone &#96;tz&#96; (=&#96;tz-utc&#96; by default) 
// interpreted by calendar &#96;cal&#96; (=&#96;cal-iso&#96;)
</span><span class="decl-fun" id="time_3"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#time_3">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_date"><span class="tp">date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>date: <span class="tp">V</span></span></a>, <a class="pp">c<span class="pc">c: <span class="tp op">?</span><span class="tp">clock</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">clock</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#clock0">clock0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock0: <span class="tp">clock</span></span></a>, <a class="pp">tz<span class="pc">tz: <span class="tp op">?</span><span class="tp">timezone</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#tz_utc">tz-utc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>utc: <span class="tp">timezone</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#cal_iso">cal-iso<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>cal<span class="dash">-</span>iso: <span class="tp">calendar</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> 
{
  <a class="pp" href="#time">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a>,<a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a>,<a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>,<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>),<a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>,<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>)
</span>}

<span class="comment">// Add a date (years, months, days) and optional clock to a time.  Takes leap years, leap seconds, etc. into account.
</span><span class="decl-fun" id="add_date"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#add_date">add-date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>add<span class="dash">-</span>date: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_date"><span class="tp">date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>date: <span class="tp">V</span></span></a>, <a class="pp">c<span class="pc">c: <span class="tp op">?</span><span class="tp">clock</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">clock</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#clock0">clock0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock0: <span class="tp">clock</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp" href="#time_3">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">d1</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">d2</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a>, <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#clock">clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>clock: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#_plus__1">+<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>(+)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a> <a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a>, <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>, <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a> )
</span>}

<span class="comment">// Add a clock (hours, minutes, seconds) to a time. Takes leap years, leap seconds, etc. into account.
</span><span class="decl-fun" id="add_clock"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#add_clock">add-clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>add<span class="dash">-</span>clock: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_clock"><span class="tp">clock</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp" href="#time_3">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>, <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#clock">clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>clock: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#_plus__1">+<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>(+)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a> <a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a>, <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>, <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a> )
</span>}

<span class="comment">// Add  a specified number of days to a calendar time. Takes leap years etc. into account.\
// &#96;time(2016,12,31,12).add-days(1).show == "2017-01-01T12:00:00Z"&#96; &amp;quad; (over a leap second)\
// &#96;time(1582,10,4,cal=cal-jg).add-days(1).show == "1582-10-15T00:00:00Z JG"&#96; &amp;quad; (transition from Julian (&#96;cal-julian&#96;) to Gregorian (&#96;cal-gregorian&#96;) calendar)\
</span><span class="decl-fun" id="add_days"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#add_days">add-days<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>add<span class="dash">-</span>days: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">days<span class="pc">days: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">c<span class="pc">c: <span class="tp op">?</span><span class="tp">clock</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">clock</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#clock0">clock0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock0: <span class="tp">clock</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#add_date">add-date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>add<span class="dash">-</span>date: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<span class="number">0</span>, <span class="number">0</span>, <a class="pp">days<span class="pc">days: <span class="tp">int</span></span></a>), <a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a> )
</span>}

<span class="comment">// Add  a specified number of weeks to a calendar time.
</span><span class="decl-fun" id="add_weeks"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#add_weeks">add-weeks<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>add<span class="dash">-</span>weeks: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">weeks</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">weeks<span class="pc">weeks: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#add_days">add-days<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>add<span class="dash">-</span>days: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">days</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">weeks<span class="pc">weeks: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">7</span> )
</span>}

<span class="comment">// Add  a specified number of months to a calendar time.
</span><span class="decl-fun" id="add_months"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#add_months">add-months<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>add<span class="dash">-</span>months: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">months</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">months<span class="pc">months: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#add_date">add-date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>add<span class="dash">-</span>date: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<span class="number">0</span>,<a class="pp">months<span class="pc">months: <span class="tp">int</span></span></a>,<span class="number">0</span>) )
</span>}

<span class="comment">// Add  a specified number of years to a calendar time.
</span><span class="decl-fun" id="add_years"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#add_years">add-years<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>add<span class="dash">-</span>years: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">years</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">years<span class="pc">years: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#add_date">add-date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>add<span class="dash">-</span>date: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">years<span class="pc">years: <span class="tp">int</span></span></a>,<span class="number">0</span>,<span class="number">0</span>) )
</span>}


<span class="comment">// Add an SI second &#96;:duration&#96; to a time.\
// &#96;(time(2015,12,31,23,59,59,0.5) + duration(1)).show == "2016-01-01T00:00:00.500Z"&#96;\
// &#96;(time(2016,12,31,23,59,59,0.5) + duration(1)).show == "2016-12-31T23:59:60.500Z"&#96; &amp;quad; (into a leap second)
</span><span class="decl-fun" id="_plus_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#_plus_">(+)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>  {
  (<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a>)<span class="kw op">.</span><a class="pp" href="#time">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>,<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a>)
</span>}

<span class="comment">// Subtract an SI second &#96;:duration&#96; from a time.\
// &#96;(time(2016,1,1,0,0,0,0.5) - duration(1)).show == "2015-12-31T23:59:59.500Z"&#96;\
// &#96;(time(2017,1,1,0,0,0,0.5) - duration(1)).show == "2016-12-31T23:59:60.500Z"&#96; &amp;quad; (into a leap second)
</span><span class="decl-fun" id="_dash_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#_dash_">(-)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <a class="pp" href="#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a><a class="pp">d<span class="pc">d: <span class="tp">duration</span></span></a>)
</span>}

<span class="comment">// Return the exact SI second duration between to times.\
// &#96;(time(2016,1,1,0,0,0,0.5) - time(2015,12,31,23,59,59)).show == "1.5s"&#96;\
// &#96;(time(2017,1,1,0,0,0,0.5) - time(2016,12,31,23,59,59)).show == "2.5s"&#96;  &amp;quad; (over a leap second)\
// &#96;(time(2017,1,1,0,0,0,0.5) - time(2017,1,1,2,59,59,tz=tz-fixed(3)).show == "2.5s"&#96;  &amp;quad; (GMT+3, and over a leap second)\
</span><span class="decl-fun" id="_dash__1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#_dash__1">(-)<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">t1</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">t2</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>( <a class="pp">t1<span class="pc">t1: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">t2<span class="pc">t2: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a> {
  (<a class="pp">t1<span class="pc">t1: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#_dash__1">-<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a> <a class="pp">t2<span class="pc">t2: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>)
</span>}

<span class="comment">// Copy a &#96;:time&#96; with optionally changing any of its attributes.\
// &#96;t.copy(month=1,day=1,hours=0,minutes=0,seconds=zero)&#96; &amp;quad; (copy to start of the year)\
// &#96;t.copy(month=t.month+2,day=t.day+3)                 &#96; &amp;quad; (add 2 months and 3 days)\
// &#96;t.copy(tz=tz-local())                               &#96; &amp;quad; (change to a different time zone)
</span><span class="decl-fun" id="copy"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#copy">copy<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>copy: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hours</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">minutes</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">seconds</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, 
                 <a class="pp">year<span class="pc">year: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">month<span class="pc">month: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#month">month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">day<span class="pc">day: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#day">day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>day: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, 
                 <a class="pp">hours<span class="pc">hours: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#hours">hours<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>hours: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">minutes<span class="pc">minutes: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#minutes">minutes<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>minutes: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">seconds<span class="pc">seconds: <span class="tp op">?</span><span class="tp">ddouble</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#seconds">seconds<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>seconds: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a>, 
                 <a class="pp">tz<span class="pc">tz: <span class="tp op">?</span><span class="tp">timezone</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> 
{
  <a class="pp" href="#time_3">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">year<span class="pc">year: <span class="tp">int</span></span></a>,<a class="pp">month<span class="pc">month: <span class="tp">int</span></span></a>,<a class="pp">day<span class="pc">day: <span class="tp">int</span></span></a>), <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Clock"><span class="co">Clock</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Clock: <span class="tp sp">(</span><span class="tp tpp">hours</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">minutes</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">seconds</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a>(<a class="pp">hours<span class="pc">hours: <span class="tp">int</span></span></a>,<a class="pp">minutes<span class="pc">minutes: <span class="tp">int</span></span></a>,<a class="pp">seconds<span class="pc">seconds: <span class="tp">ddouble</span></span></a>), <a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a> )
</span>}

<span class="comment">// Copy a &#96;:time&#96; with a new &#96;:date&#96; and optional &#96;:clock&#96; (=&#96;t.clock&#96;), and optionally a new
// timezone (=&#96;t.timezone&#96;) and calendar (=&#96;t.calendar&#96;).
</span><span class="decl-fun" id="copy_dc"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#copy_dc">copy-dc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>copy<span class="dash">-</span>dc: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">d<span class="pc">d: <span class="tp op">?</span><span class="tp">date</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>, <a class="pp">c<span class="pc">c: <span class="tp op">?</span><span class="tp">clock</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">clock</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#clock">clock<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>clock: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">clock</span></span></a>,
                    <a class="pp">tz<span class="pc">tz: <span class="tp op">?</span><span class="tp">timezone</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> 
{
  <a class="pp" href="#time_3">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a>, <a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a>, <a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a> )
</span>}

<span class="comment">// Return the time at the start of the day of time &#96;t&#96;.
</span><span class="decl-fun" id="start_of_day"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#start_of_day">start-of-day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>start<span class="dash">-</span>of<span class="dash">-</span>day: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#copy_dc">copy-dc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>copy<span class="dash">-</span>dc: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#clock0">clock0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock0: <span class="tp">clock</span></span></a>)
</span>}

<span class="comment">// Return the time at the start of the month of time &#96;t&#96;.
</span><span class="decl-fun" id="start_of_month"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#start_of_month">start-of-month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>start<span class="dash">-</span>of<span class="dash">-</span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#copy_dc">copy-dc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>copy<span class="dash">-</span>dc: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>((<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>)(day<span class="kw">=</span><span class="number">1</span>),<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#clock0">clock0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock0: <span class="tp">clock</span></span></a>)
</span>}

<span class="comment">// Return the time at the start of the week (Monday) of time &#96;t&#96;.
</span><span class="decl-fun" id="start_of_week"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#start_of_week">start-of-week<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>start<span class="dash">-</span>of<span class="dash">-</span>week: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">dow<span class="pc">dow: <span class="tp">weekday</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#weekday">weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>weekday: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">weekday</span></span></a>
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">dow</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#_eq__eq__2">==<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>(==)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Mon"><span class="co">Mon</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Mon: <span class="tp">weekday</span></span></a>) <span class="kw">then</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#start_of_day">start-of-day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>start<span class="dash">-</span>of<span class="dash">-</span>day: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a> 
                <span class="kw">else</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#copy_dc">copy-dc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>copy<span class="dash">-</span>dc: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( (<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>)(day<span class="kw">=</span>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#day">day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>day: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">dow<span class="pc">dow: <span class="tp">weekday</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">1</span>), <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#clock0">clock0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock0: <span class="tp">clock</span></span></a> )
</span>}

<span class="comment">// Return the time at the start of the year of time &#96;t&#96;.
</span><span class="decl-fun" id="start_of_year"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#start_of_year">start-of-year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>start<span class="dash">-</span>of<span class="dash">-</span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#copy_dc">copy-dc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>copy<span class="dash">-</span>dc: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<span class="number">1</span>,<span class="number">1</span>),<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#clock0">clock0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock0: <span class="tp">clock</span></span></a>)
</span>}


<span class="comment">/&#42;----------------------------------------------------------------------------
  Generic calendar calculations;
  Surprisingly, all of these work for any calendar and do not make 
  assumptions about the length of month, the number of months in a year etc.
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">// Return the weekday of a given time &#96;t&#96;.
</span><span class="decl-fun" id="weekday"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#weekday">weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>weekday: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">weekday</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_weekday"><span class="tp">weekday</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>weekday: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">days<span class="pc">days: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#mjd">mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>mjd: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">nonfin</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">val</span> <a class="pp">dow<span class="pc">dow: <span class="tp">int</span></span></a>  <span class="kw">=</span> (<a class="pp">days<span class="pc">days: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">3</span>)<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_perc_">%<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(%): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">7</span>        <span class="comment">// plus 3 since MJD epoch was a wednesday  (note: 0 = sunday, 1 = monday, ..)
</span>  <a class="pp">dow<span class="pc">dow: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#weekday">weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>weekday: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">weekday</span></span></a>                  <span class="comment">// to ISO week day 
</span></span>}


<span class="comment">// Return a &#96;:time&#96; as a fractional year.\
// &#96;year-frac(time(2000,7,2)) == fixed(2000.5)&#96;
</span><span class="decl-fun" id="year_frac"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#year_frac">year-frac<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year<span class="dash">-</span>frac: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">dfrac<span class="pc">dfrac: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#mjd">mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>mjd: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#fraction">fraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>fraction: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="comment">// t.clock.total-seconds.double / 86400.0
</span>  <span class="kw">val</span> <a class="pp">yfrac<span class="pc">yfrac: <span class="tp">double</span></span></a> <span class="kw">=</span> ((<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#day_of_year">day-of-year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>day<span class="dash">-</span>of<span class="dash">-</span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">1</span>)<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">dfrac<span class="pc">dfrac: <span class="tp">double</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#days_in_year">days-in-year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>days<span class="dash">-</span>in<span class="dash">-</span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_timestamp-source.html#timespan">timespan<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan: <span class="tp sp">(</span><span class="tp tpp">seconds</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">yfrac<span class="pc">yfrac: <span class="tp">double</span></span></a>)
</span>}

<span class="comment">// Return the total months in the year of time &#96;t&#96;.
// For Gregorian calendars this is always 12 but some calendars have a varying number of months per year.
</span><span class="decl-fun" id="months_in_year"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#months_in_year">months-in-year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>months<span class="dash">-</span>in<span class="dash">-</span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#copy_dc">copy-dc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>copy<span class="dash">-</span>dc: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>) )<span class="kw op">.</span><a class="pp" href="#month">month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="comment">// Return the &#96;n&#96;th week day following (and including) time &#96;t&#96;.
// Use &#96;n = 1&#96; for the first week day &#96;wd&#96; following &#96;t&#96;; 
// Use &#96;0&#96; for the last occurence of week day &#96;wd&#96; before &#96;t&#96;.\
// &#96;time(2016,10,10).nth-weekday(1,Sun)&#96; &amp;quad; (2016-10-13, first Sunday following October 10, 2016)
// &#96;time(2016,11,16).start-of-month.nth-weekday(0,Wed)&#96; &amp;quad; (2016-10-26, the last Wednesday before 2016-11-01)
</span><span class="decl-fun" id="nth_weekday"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#nth_weekday">nth-weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>nth<span class="dash">-</span>weekday: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_weekday"><span class="tp">weekday</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>weekday: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">dow<span class="pc">dow: <span class="tp">weekday</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#weekday">weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>weekday: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">weekday</span></span></a>
  <span class="kw">val</span> <a class="pp">inc<span class="pc">inc: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#_dash__1">-<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">wd1</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">,</span> <span class="tp tpp">wd2</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">dow<span class="pc">dow: <span class="tp">weekday</span></span></a>
  <span class="kw">val</span> <a class="pp">wday<span class="pc">wday: <span class="tp">int</span></span></a><span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#day">day<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>day: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">inc<span class="pc">inc: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">7</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">1</span>)
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#copy_dc">copy-dc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>copy<span class="dash">-</span>dc: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#month">month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">wday<span class="pc">wday: <span class="tp">int</span></span></a>) ) 
</span>}

<span class="comment">// Return the first week day following (and including) time &#96;t&#96;.
</span><span class="decl-fun" id="first_weekday"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#first_weekday">first-weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>first<span class="dash">-</span>weekday: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_weekday"><span class="tp">weekday</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>weekday: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#nth_weekday">nth-weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>nth<span class="dash">-</span>weekday: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<span class="number">1</span>,<a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a>)
</span>}

<span class="comment">// Return the last week day before time &#96;t&#96;.\
// &#96;time(2016,11,1).last-weekday(Sun)&#96; &amp;quad;  (2016-10-30, Last Sunday of October 2016)
</span><span class="decl-fun" id="last_weekday"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#last_weekday">last-weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>last<span class="dash">-</span>weekday: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_weekday"><span class="tp">weekday</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>weekday: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#nth_weekday">nth-weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>nth<span class="dash">-</span>weekday: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<span class="number">0</span>,<a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a>)
</span>}

<span class="comment">// Return the &#96;n&#96;th week day since the beginning of the month of time &#96;t&#96;.\
// &#96;time(2016,10,10).nth-weekday-of-month(2,Sun).date&#96; &amp;quad; (2016-10-09, Second Sunday of October 2016)\
// &#96;time(2016,10,10).nth-weekday-of-month(60,Sun).date&#96; &amp;quad; (2017-11-19, 60th Sunday since Octorber 1, 2016)\
</span><span class="decl-fun" id="nth_weekday_of_month"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#nth_weekday_of_month">nth-weekday-of-month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>nth<span class="dash">-</span>weekday<span class="dash">-</span>of<span class="dash">-</span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_weekday"><span class="tp">weekday</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>weekday: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#copy_dc">copy-dc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>copy<span class="dash">-</span>dc: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#month">month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<span class="number">1</span>))<span class="kw op">.</span><a class="pp" href="#nth_weekday">nth-weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>nth<span class="dash">-</span>weekday: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a>,<a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a>)
</span>}

<span class="comment">// Return the first week day of the month of time &#96;t&#96;.\
// &#96;time(2016,10,10).first-weekday-of-month(Sun)&#96; &amp;quad; (2016-10-02, First Sunday of October 2016)
</span><span class="decl-fun" id="first_weekday_of_month"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#first_weekday_of_month">first-weekday-of-month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>first<span class="dash">-</span>weekday<span class="dash">-</span>of<span class="dash">-</span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_weekday"><span class="tp">weekday</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>weekday: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#nth_weekday_of_month">nth-weekday-of-month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>nth<span class="dash">-</span>weekday<span class="dash">-</span>of<span class="dash">-</span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<span class="number">1</span>,<a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a>)
</span>}

<span class="comment">// Return the last week day of the month of time &#96;t&#96;.\
// &#96;time(2016,10,10).last-weekday-of-month(Sun).date&#96; &amp;quad; (2016-10-30, Last Sunday of October 2016)
</span><span class="decl-fun" id="last_weekday_of_month"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#last_weekday_of_month">last-weekday-of-month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>last<span class="dash">-</span>weekday<span class="dash">-</span>of<span class="dash">-</span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_weekday"><span class="tp">weekday</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>weekday: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#copy_dc">copy-dc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>copy<span class="dash">-</span>dc: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#month">month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">1</span>,<span class="number">1</span>))<span class="kw op">.</span><a class="pp" href="#last_weekday">last-weekday<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>last<span class="dash">-</span>weekday: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">wd</span> <span class="tp kw op">:</span> <span class="tp">weekday</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">wd<span class="pc">wd: <span class="tp">weekday</span></span></a>)
</span>}


<span class="comment">// ---------------------------------------------------
// The following functions are generic in the calendar
// and are relied upon by other routines for efficiency.
// We may want to optimize this by using specialized
// implementations if the ISO calendar is in use.
// ---------------------------------------------------
</span>
<span class="comment">// Return the day of the year of time &#96;t&#96; (starting at 1).
</span><span class="decl-fun" id="day_of_year"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#day_of_year">day-of-year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>day<span class="dash">-</span>of<span class="dash">-</span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#day_diff">day-diff<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>day<span class="dash">-</span>diff: <span class="tp sp">(</span><span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">,</span> <span class="tp tpp">d1</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">d2</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<span class="number">1</span>,<span class="number">1</span>)) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">1</span>
</span>}

<span class="comment">// Return the total days in the month of time &#96;t&#96;.
</span><span class="decl-fun" id="days_in_month"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#days_in_month">days-in-month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>days<span class="dash">-</span>in<span class="dash">-</span>month: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#date">date<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>date: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#day_diff">day-diff<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>day<span class="dash">-</span>diff: <span class="tp sp">(</span><span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">,</span> <span class="tp tpp">d1</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">d2</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">date</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#month">month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>month: <span class="tp sp">(</span><span class="tp tpp">date</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">1</span>,<span class="number">1</span>),<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">date</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#month">month<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>month: <span class="tp sp">(</span><span class="tp tpp">date</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<span class="number">1</span>))  
</span>}

<span class="comment">// Return the total days in the year of time &#96;t&#96;.
</span><span class="decl-fun" id="days_in_year"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#days_in_year">days-in-year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>days<span class="dash">-</span>in<span class="dash">-</span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#day_diff">day-diff<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>day<span class="dash">-</span>diff: <span class="tp sp">(</span><span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">,</span> <span class="tp tpp">d1</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">d2</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#con_space_Date"><span class="co">Date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>Date: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">date</span></span></a>(<a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<span class="number">1</span>,<span class="number">1</span>))  
</span>}

<span class="comment">// Return the modified Julian date ([MJD](https://en.wikipedia.org/wiki/Julian&#95;day#Variants)) 
// number for a given &#96;:time&#96;. This interprets the Modified Julian Date in the calendar
// system of &#96;t&#96; with the timezone applied.\
// &#96;time(1972,1,2,tz=tz-fixed(1)).mjd == "41318"&#96;\
// &#96;time(1972,1,2,tz=tz-fixed(1)).instant.mjd(ts-utc).show == "41317.958333335"&#96; &amp;quad; (one hour earlier)
//
// Also takes leap seconds into account:\
// &#96;time(2015,12,31,12,0,0).mjd.show == "57387.5"&#96; &amp;quad; (exactly mid-day)\
// &#96;time(2016,12,31,12,0,0).mjd.show == "57753.499994213029942"&#96; &amp;quad; (this day has a leap second, so it is just before the real middle of the day)\
// &#96;time(2016,12,31,12,0,0,0.5).mjd.show == "57753.5"&#96; &amp;quad; (real middle of the day)\
</span><span class="decl-fun" id="mjd"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#mjd">mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>mjd: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="tp">V</span></span></a> {
  <span class="comment">//trace("offset: " + t.tzdelta.show)
</span>  <span class="comment">// adjust with the timezone delta so we display the mjd on the date.
</span>  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#instant">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>instant: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#mjd">mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>mjd: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">delta</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timespan</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#timescale">timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>timescale: <span class="tp sp">(</span><span class="tp tpp">calendar</span> <span class="tp kw op">:</span> <span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timescale</span></span></a>, <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#tzdelta">tzdelta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>tzdelta: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#timespan">timespan<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>timespan: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a> )
</span>}

<span class="comment">/&#42; Return the Julian date ([JD](https://en.wikipedia.org/wiki/Julian&#95;day)) 
number for a given &#96;:time&#96; &#96;t&#96;. This interprets the Julian date in the calendar of &#96;t&#96; with
the timezone of &#96;t&#96; applied.\
&#96;time(~4713,11,24,12,cal=cal-tt).jd == "0"&#96;\
&#96;time(1972,1,2,tz=tz-fixed(1)).jd == "2441318.5"&#96;\
&#96;time(1972,1,2,tz=tz-fixed(1)).instant.jd(ts-utc).show == "2441318.458333335"&#96; 

Takes leap seconds into account when calculating the fraction of the day,
see &#96;mjd&#96; for examples.
&#42;/</span>
<span class="decl-fun" id="jd"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#jd">jd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>jd: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#type_space_ddouble"><span class="tp">ddouble</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>ddouble: <span class="tp">V</span></span></a> {
  <span class="comment">//trace("offset: " + t.tzdelta.show)
</span>  <span class="comment">// adjust with the timezone delta so we display the mjd on the date.
</span>  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#mjd">mjd<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>mjd: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a>() <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_ddouble-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>ddouble<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">ddouble</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ddouble</span></span></a> <a class="pp" href="#jd_epoch_delta">jd-epoch-delta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>jd<span class="dash">-</span>epoch<span class="dash">-</span>delta: <span class="tp">timespan</span></span></a>
</span>}
<span class="decl-val" id="jd_epoch_delta"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#jd_epoch_delta">jd-epoch-delta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>jd<span class="dash">-</span>epoch<span class="dash">-</span>delta: <span class="tp">timespan</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_timestamp-source.html#timespan_1">timespan<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timestamp<span class="fslash last">/</span></span>timespan<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a>(<span class="number">2400000.5</span></span>) 


<span class="comment">// Return the current time in an optional timezone (=&#96;tz-utc&#96;) and optional calendar (=&#96;cal-iso&#96;).
</span><span class="decl-fun" id="time_now"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#time_now">time-now<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="dash">-</span>now: <span class="tp sp">(</span><span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">time</span></span></a>(<a class="pp">tz<span class="pc">tz: <span class="tp op">?</span><span class="tp">timezone</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#tz_utc">tz-utc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>utc: <span class="tp">timezone</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#cal_iso">cal-iso<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>cal<span class="dash">-</span>iso: <span class="tp">calendar</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_chrono-source.html#now">now<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>chrono<span class="fslash last">/</span></span>now: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">instant</span></span></a>()<span class="kw op">.</span><a class="pp" href="#time">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>,<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>)
</span>}

<span class="comment">// Return the current time in the local timezone and optional calendar (=&#96;cal-iso&#96;).
</span><span class="decl-fun" id="local_time_now"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#local_time_now">local-time-now<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>local<span class="dash">-</span>time<span class="dash">-</span>now: <span class="tp sp">(</span><span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">time</span></span></a>(<a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#cal_iso">cal-iso<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>cal<span class="dash">-</span>iso: <span class="tp">calendar</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp" href="#time_now">time-now<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="dash">-</span>now: <span class="tp sp">(</span><span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">time</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#tz_local">tz-local<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>local: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">timezone</span></span></a>(),<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>)
</span>}

<span class="comment">// Convert a &#96;:time&#96; &#96;t&#96; to a new &#96;:time&#96; value in the local time zone
// in an optional calendar (=&#96;t.calendar&#96; by default).
</span><span class="decl-fun" id="local_time"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#local_time">local-time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>local<span class="dash">-</span>time: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">time</span></span></a>( <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#calendar">calendar<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>calendar: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">calendar</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp">t<span class="pc">t: <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="#time_1">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#tz_local">tz-local<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>local: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">timezone</span></span></a>(),<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>)
</span>} 

<span class="comment">// Convert an &#96;:instant&#96; to a &#96;:time&#96; value in the local timezone, in an optional calendar (=&#96;cal-iso&#96; by default).
</span><span class="decl-fun" id="local_time_1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#local_time_1">local-time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>local<span class="dash">-</span>time<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">time</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#cal_iso">cal-iso<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>cal<span class="dash">-</span>iso: <span class="tp">calendar</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> {
  <a class="pp" href="#time">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#tz_local">tz-local<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>local: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">timezone</span></span></a>(),<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>)
</span>}

<span class="comment">// Return the &#96;:time&#96; value for a given date and clock in the local timezone
// interpreted by calendar &#96;cal&#96; (=&#96;cal-iso&#96;). See &#96;instant&#96; for roll-over behaviour.
</span><span class="decl-fun" id="local_time_2"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#local_time_2">local-time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>local<span class="dash">-</span>time<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hours</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">minutes</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">time</span></span></a>( <a class="pp">year<span class="pc">year: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">month<span class="pc">month: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">1</span>, <a class="pp">day<span class="pc">day: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">1</span>, 
                       <a class="pp">hours<span class="pc">hours: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0</span>, <a class="pp">minutes<span class="pc">minutes: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0</span>, <a class="pp">secs<span class="pc">secs: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0</span>, 
                       <a class="pp">frac<span class="pc">frac: <span class="tp op">?</span><span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0.0</span>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#cal_iso">cal-iso<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>cal<span class="dash">-</span>iso: <span class="tp">calendar</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> 
{
  <a class="pp" href="#time_2">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hours</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">minutes</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">year<span class="pc">year: <span class="tp">int</span></span></a>,<a class="pp">month<span class="pc">month: <span class="tp">int</span></span></a>,<a class="pp">day<span class="pc">day: <span class="tp">int</span></span></a>,<a class="pp">hours<span class="pc">hours: <span class="tp">int</span></span></a>,<a class="pp">minutes<span class="pc">minutes: <span class="tp">int</span></span></a>,<a class="pp">secs<span class="pc">secs: <span class="tp">int</span></span></a>,<a class="pp">frac<span class="pc">frac: <span class="tp">double</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#tz_local">tz-local<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>local: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">timezone</span></span></a>(),<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>)
</span>}


<span class="comment">// Return the &#96;:time&#96; value for a given &#96;:date&#96; and &#96;:clock&#96; (=&#96;clock0&#96;) in the local timezone
// interpreted by calendar &#96;cal&#96; (=&#96;cal-iso&#96;)
</span><span class="decl-fun" id="local_time_3"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_time.html#local_time_3">local-time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>local<span class="dash">-</span>time<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">time</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#type_space_date"><span class="tp">date</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>date: <span class="tp">V</span></span></a>, <a class="pp">c<span class="pc">c: <span class="tp op">?</span><span class="tp">clock</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">clock</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_date-source.html#clock0">clock0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>date<span class="fslash last">/</span></span>clock0: <span class="tp">clock</span></span></a>, <a class="pp">cal<span class="pc">cal: <span class="tp op">?</span><span class="tp">calendar</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">calendar</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#cal_iso">cal-iso<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>cal<span class="dash">-</span>iso: <span class="tp">calendar</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a> <a class="pp" href="#type_space_time"><span class="tp">time</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp">V</span></span></a> 
{
  <a class="pp" href="#time_3">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">date</span><span class="tp sp">,</span> <span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">clock</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">date</span></span></a>,<a class="pp">c<span class="pc">c: <span class="tp">clock</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_calendar-source.html#tz_local">tz-local<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>local: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">timezone</span></span></a>(),<a class="pp">cal<span class="pc">cal: <span class="tp">calendar</span></span></a>)
</span>}

<span class="comment">/&#42;

// Return the &#96;:time&#96; value for a given &#96;:weekdate&#96; and &#96;:clock&#96; (=&#96;clock0&#96;) in the local timezone &#96;tz&#96;
// interpreted by calendar &#96;cal&#96; (=&#96;cal-iso-week&#96;).
// It is also possible to pass the weekday that determines if 
// a week falls in the current year or not (which is Thursday for the ISO definition).
public fun local-time-weekdate( year :int, month: int, weekday : weekday, c : clock = clock0, 
                        cal : calendar = cal-iso-week ) : ndet time {
  time-weekdate(year,month,weekday,c,tz-local(),cal)
}

// Return the &#96;:time&#96; value for a given ISO week date and &#96;:clock&#96; (=&#96;clock0&#96;) in a timezone &#96;tz&#96; (=&#96;tz-utc&#96; by default) 
// interpreted by calendar &#96;cal&#96; (=&#96;cal-iso-week&#96;).
// &#96;time(2004,53,Sat,cal=cal-iso).date.show == "2005-01-01"&#96;\
// &#96;time(2005,52,Sat,cal=cal-iso).date.show == "2005-12-31"&#96;\
// &#96;time(2009,1,Wed,cal=cal-iso).date.show == "2008-12-31"&#96;
public fun time-weekdate( year : int, month : int, weekday : weekday, c : clock = clock0, 
                  tz : timezone = tz-utc, cal : calendar = cal-iso-week) : time 
{
  time(instant(date(year,month,weekday.int),c,tz,cal=cal-iso-week),tz,cal)
}

&#42;/</span></pre>

</div></body>
</html>
