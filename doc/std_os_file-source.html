<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=1.0" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>file.kk documentation</title>
</head>

<body class="koka doc body madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2020-2021, Microsoft Research, Daan Leijen.

  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the LICENSE file at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>


<span class="comment">/&#42; File operations.
&#42;/</span>
<span class="kw">module</span> file

<span class="kw">import</span> path
<span class="kw">import</span> dir

<span class="kw">extern</span> <span class="kw">import</span> {
  c file <span class="st">"file-inline.c"</span>
  js file <span class="st">"file-inline.js"</span>
}

<span class="comment">// Read a text file synchronously (using UTF8 encoding)
</span><span class="decl-fun" id="read_text_file"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#read_text_file">read-text-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>read<span class="dash">-</span>text<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>( <a class="pp">path<span class="pc">path: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">HX</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <span class="kw">match</span>(<a class="pp" href="#read_text_file_err">read-text-file-err<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>read<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>err: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">path<span class="pc">path: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)) {
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Error"><span class="co">Error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a>)  <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Error"><span class="co">Error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a><span class="kw op">.</span><a class="pp" href="#prepend">prepend<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>prepend: <span class="tp sp">(</span><span class="tp tpp">exn</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">,</span> <span class="tp tpp">pre</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exception</span></span></a>(<span class="st">"unable to read text file "</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">path<span class="pc">path: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>))<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#throw_1">throw<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>throw<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">err</span> <span class="tp kw op">:</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Ok"><span class="co">Ok</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Ok: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">content<span class="pc">content: <span class="tp">string</span></span></a>) <span class="kw op">-></span> <a class="pp">content<span class="pc">content: <span class="tp">string</span></span></a>
  }
</span>}

<span class="comment">// Write a text file synchronously (using UTF8 encoding)
</span><span class="decl-fun" id="write_text_file"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#write_text_file">write-text-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>write<span class="dash">-</span>text<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">content</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">create<span class="dash">-</span>dir</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">path<span class="pc">path: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp">V</span></span></a>, <a class="pp">content<span class="pc">content: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">create-dir<span class="pc">create<span class="dash">-</span>dir: <span class="tp op">?</span><span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">HX</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a>  {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">create-dir<span class="pc">create<span class="dash">-</span>dir: <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_dir-source.html#ensure_dir">ensure-dir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>dir<span class="fslash last">/</span></span>ensure<span class="dash">-</span>dir: <span class="tp sp">(</span><span class="tp tpp">dir</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">fsys</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">path<span class="pc">path: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#nobase">nobase<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>nobase: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">path</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a>
  <span class="kw">match</span>(<a class="pp" href="#write_text_file_err">write-text-file-err<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>write<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>err: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">content</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">path<span class="pc">path: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>,<a class="pp">content<span class="pc">content: <span class="tp">string</span></span></a>)) {
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Error"><span class="co">Error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a>) <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Error"><span class="co">Error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a><span class="kw op">.</span><a class="pp" href="#prepend">prepend<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>prepend: <span class="tp sp">(</span><span class="tp tpp">exn</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">,</span> <span class="tp tpp">pre</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exception</span></span></a>(<span class="st">"unable to write text file "</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">path<span class="pc">path: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>))<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#throw_1">throw<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>throw<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">err</span> <span class="tp kw op">:</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>
    &#95; <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a>
  }
</span>}


<span class="decl-fun" id="prepend"><span class="kw">private</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#prepend">prepend<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>prepend: <span class="tp sp">(</span><span class="tp tpp">exn</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">,</span> <span class="tp tpp">pre</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exception</span></span></a>( <a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exception"><span class="tp">exception</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exception: <span class="tp">V</span></span></a>, <a class="pp">pre<span class="pc">pre: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exception"><span class="tp">exception</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exception: <span class="tp">V</span></span></a> {
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Exception"><span class="co">Exception</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Exception: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">info</span> <span class="tp kw op">:</span> <span class="tp">exception<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exception</span></span></a>(<a class="pp">pre<span class="pc">pre: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">": "</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#message">message<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>message: <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>, <a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#info">info<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>info: <span class="tp sp">(</span><span class="tp tpp">exception</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exception<span class="dash">-</span>info</span></span></a>)
</span>}


<span class="decl-fun" id="read_text_file_err"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#read_text_file_err">read-text-file-err<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>read<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>err: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">path<span class="pc">path: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="tp">X</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_error"><span class="tp">error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  c <span class="st">"kk&#95;os&#95;read&#95;text&#95;file&#95;error"</span>
  js <span class="st">"&#95;read&#95;text&#95;file&#95;error"</span>
  <span class="comment">//cs inline "System.IO.File.ReadAllText(#1,System.Text.Encoding.UTF8)"
</span></span>}

<span class="decl-fun" id="write_text_file_err"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#write_text_file_err">write-text-file-err<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>write<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>err: <span class="tp sp">(</span><span class="tp tpp">path</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">content</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fsys</span> <span class="tp">error</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">path<span class="pc">path: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">content<span class="pc">content: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_fsys"><span class="tp"><span class="effect">fsys</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fsys: <span class="tp">X</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_error"><span class="tp">error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  c <span class="st">"kk&#95;os&#95;write&#95;text&#95;file&#95;error"</span>
  js <span class="st">"&#95;write&#95;text&#95;file&#95;error"</span>
  <span class="comment">//cs inline "System.IO.File.WriteAllText(#1,#2,System.Text.Encoding.UTF8)"
</span></span>}
</pre>

</body>
</html>
