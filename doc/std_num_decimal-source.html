<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=1.0" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>decimal.kk documentation</title>
</head>

<body class="koka doc body madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2012-2021, Microsoft Research, Daan Leijen.

  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the LICENSE file at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">// Arbitrary precision decimal numbers.
</span><span class="kw">module</span> decimal

<span class="kw">import</span> parse
<span class="kw">import</span> double

<span class="comment">// Type of a decimal number. Decimals have arbitrary precision and range and
// do exact decimal arithmetic and are well suited for financial calculations for
// example.
</span><span class="decl-type" id="type_space_decimal"><span class="kw">abstract</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Decimal"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> (
  <span class="decl-fun" id="num"><a class="pp">num<span class="pc">num: <span class="tp">int</span></span></a></span><span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>,
  <span class="decl-fun" id="exp"><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a></span><span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>
</span></span>)

<span class="comment">// The decimal zero.
</span><span class="decl-val" id="zero"><span class="kw">public</span> <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>zero: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<span class="number">0</span>,<span class="number">0</span></span>)

<span class="comment">// round exponents to specific intervals (7) to avoid too much rescaling
</span><span class="decl-fun" id="round_exp"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#round_exp">round-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_zero">is-zero<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>zero: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="number">0</span> <span class="kw">else</span> <span class="number">7</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">7</span>)
</span>}

<span class="comment">// Create a decimal from an integer &#96;i&#96; with an optional
// exponent &#96;exp&#96; (=&#96;0&#96;) such that the result equals &#96;i&#96;&amp;times;10^&#96;exp&#96;^.
</span><span class="decl-fun" id="decimal"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#decimal">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>, <a class="pp">exp<span class="pc">exp: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <span class="number">0</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>,<a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a>)
</span>}


<span class="comment">// Create a decimal from an integer &#96;i&#96; with an optional
// exponent &#96;exp&#96; (=&#96;0&#96;) such that the result equals &#96;i&#96;&amp;times;10^&#96;exp&#96;^.
</span><span class="decl-fun" id="decimal_exp"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>, <a class="pp">exp<span class="pc">exp: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <span class="number">0</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="comment">// use exponents only at specific intervals to avoid too much re-scaling
</span>  <span class="kw">val</span> <a class="pp">x<span class="pc">x: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp" href="#round_exp">round-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a>)  <span class="comment">// always x &lt;= exp
</span>  <span class="kw">val</span> <a class="pp">diff<span class="pc">diff: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">int</span></span></a>
  <span class="comment">// trace("decimal-exp: " + i.show + "e" + exp.show + ", diff: " + diff.show + ", x: " + x.show)
</span>  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">diff<span class="pc">diff: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_zero">is-zero<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>zero: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>,<a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a>) <span class="kw">else</span> <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#mul_exp10">mul-exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>exp10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">diff<span class="pc">diff: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>),<a class="pp">x<span class="pc">x: <span class="tp">int</span></span></a>)
</span>}

<span class="comment">/&#42; Create a decimal from a &#96;:double&#96; with a specified maximal precision (=&#96;-1&#96;).
Use a negative maximal precision to create a decimal that precisely represents the &#96;:double&#96;.
Note: creating a &#96;:decimal&#96; from a &#96;:double&#96; may lose precision and give surprising results as many decimal
fractions cannot be represented precisely by a &#96;:double&#96;.
Also, &#96;decimal(i,exp)&#96; is more efficient and better when when exact representations
are required. For example:
&#96;&#96;&#96;
&gt; decimal(1.1)
1.100000000000000088817841970012523233890533447265625
&gt; decimal(1.1,17)
1.10000000000000008
&gt; decimal(11,-1)
1.1
&#96;&#96;&#96;
.
&#42;/</span>
<span class="decl-fun" id="decimal_1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#decimal_1">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>double: <span class="co">V</span></span></a>, <a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <span class="number">-1</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">man<span class="pc">man: <span class="tp">int</span></span></a>,<a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>  <span class="kw">=</span> <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_double-source.html#decode">decode<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>decode: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_gt__eq__1">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0</span>) <span class="kw">then</span> (<a class="pp">man<span class="pc">man: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> (<span class="number">2</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_hat__1">^<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(^)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a>))<span class="kw op">.</span><a class="pp" href="#decimal">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a> <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> <span class="kw">=</span> <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_lt__1">&lt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0</span>)  <span class="kw">then</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <span class="kw">else</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#min">min<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>min: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp">int</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a>)
    <a class="pp" href="#div">div<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>div: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">min<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">man<span class="pc">man: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="#decimal">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>, <a class="pp" href="#pow">pow<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>pow: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<span class="number">2</span><span class="kw op">.</span><a class="pp" href="#decimal">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a>), <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> )
  }
</span>}


<span class="comment">/&#42;
// Parse a &#96;:decimal&#96; number.
public fun parse-decimalx( s : string ) : maybe&lt;decimal&gt; {
  match(s.trim.find(rx-decimal)) {
    Nothing -&gt; Nothing
    Just(cap) -&gt; {
      val sign  = cap.groups[1]
      val whole  = cap.groups[2]
      val frac  = cap.groups[3]
      val exp   = ~frac.count + cap.groups[4].parse-int.default(0)
      val f  = decimal-exp( (whole + frac).parse-int.default(0), exp )
      if (sign=="-") then Just(~f) else Just(f)
    }
  }
}
val rx-decimal = regex(@"^([\-\+]?)(\d+)(?:\.(\d&#42;))?(?:[eE]([\-\+]?\d+))?$")
&#42;/</span>

<span class="comment">// Parse a &#96;:decimal&#96; number.
</span><span class="decl-fun" id="parse_decimal"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#parse_decimal">parse-decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>parse<span class="dash">-</span>decimal: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">decimal</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#trim">trim<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>trim: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#slice">slice<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>slice: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#parse_eof">parse-eof<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse<span class="dash">-</span>eof: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">input</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#pdecimal">pdecimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>pdecimal: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">decimal</span></span></a>)<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#maybe">maybe<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>maybe: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">perr</span> <span class="tp kw op">:</span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
</span>}

<span class="decl-fun" id="pdecimal"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#pdecimal">pdecimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>pdecimal: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">decimal</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="co">HX</span></span></a> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">neg<span class="pc">neg: <span class="tp">bool</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#sign">sign<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>sign: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">bool</span></span></a>()
  <span class="kw">val</span> <a class="pp">whole<span class="pc">whole: <span class="tp">string</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#digits">digits<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>digits: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>()
  <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#optional">optional<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>optional: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>(<span class="st">""</span>, { <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#char">char<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<span class="st">'.'</span>); <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#digits">digits<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>digits: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>() })
  <span class="kw">val</span> <a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#optional">optional<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>optional: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>(<span class="number">0</span>, { <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#one_of">one-of<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>one<span class="dash">-</span>of: <span class="tp sp">(</span><span class="tp tpp">chars</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<span class="st">"eE"</span>); <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse-source.html#pint">pint<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>pint: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">int</span></span></a>() })
  <span class="comment">// trace("frac:" + frac)
</span>  <span class="kw">val</span> <a class="pp">i<span class="pc">i: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( (<a class="pp">whole<span class="pc">whole: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a>)<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#parse_int_default">parse-int-default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>parse<span class="dash">-</span>int<span class="dash">-</span>default: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hex</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<span class="number">0</span>), <a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#count_1">count<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>count<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> )
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">neg<span class="pc">neg: <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a><a class="pp">i<span class="pc">i: <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp">i<span class="pc">i: <span class="tp">decimal</span></span></a>
</span>}

<span class="comment">// Ensure a decimal &#96;x&#96; has an exponent such that &#96;x.exp &lt;= e&#96;.
</span><span class="decl-fun" id="expand"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_lt__eq__1">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">else</span> {
    <span class="comment">//trace("expand: " ++ x.show ++ " to exp " ++ p.show)
</span>    <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#mul_exp10">mul-exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>exp10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> ), <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> )
  }
</span>}

<span class="comment">// Choose an exponent that minimizes memory usage.
</span><span class="decl-fun" id="reduce"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#reduce">reduce<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>reduce: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>   <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_exp10">is-exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>exp10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_excl__1">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(!)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_pos_2">is-pos<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>pos<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">decimal</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>
  <span class="kw">val</span> <a class="pp">expp<span class="pc">expp: <span class="tp">int</span></span></a><span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>
  <span class="comment">// trace("reduce: x:" ++ x.showx ++ ", p:" ++ p.show ++ ", expp:" ++ expp.show)
</span>  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="#round_exp">round-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">expp<span class="pc">expp: <span class="tp">int</span></span></a>)<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__1">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#cdiv_exp10">cdiv-exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>cdiv<span class="dash">-</span>exp10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>), <a class="pp">expp<span class="pc">expp: <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Add two decimals.
</span><span class="decl-fun" id="_plus_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_plus_">(+)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#min">min<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>min: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
  <span class="comment">// trace("add: " ++ x.show-raw ++ " + " ++ y.show-raw ++ ", using exp: " ++ e.show )
</span>  <span class="kw">val</span> <a class="pp">xx<span class="pc">xx: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>)
  <span class="kw">val</span> <a class="pp">yy<span class="pc">yy: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>)
  <span class="comment">// trace("expanded add: " ++ xx.show-raw ++ " + " ++ yy.show-raw)
</span>  <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">xx<span class="pc">xx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">yy<span class="pc">yy: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Negate a decimal.
</span><span class="decl-fun" id="_tilde_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_tilde_">(~)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Subtract two decimals.
</span><span class="decl-fun" id="_dash_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_dash_">(-)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <a class="pp" href="#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a> (<a class="pp" href="#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a><a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>)
</span>}

<span class="comment">// Increment a decimal
</span><span class="decl-fun" id="inc"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Decrement a decimal
</span><span class="decl-fun" id="dec"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#dec">dec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>dec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#dec">dec<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>dec: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Is this an even decimal?
</span><span class="decl-fun" id="is_even"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#is_even">is-even<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>even: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_even">is-even<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>even: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>
</span>}

<span class="comment">// Is this an odd decimal?
</span><span class="decl-fun" id="is_odd"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#is_odd">is-odd<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>odd: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span><a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_odd">is-odd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>odd: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>
</span>}


<span class="comment">// Is this decimal zero?
</span><span class="decl-fun" id="is_zero"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#is_zero">is-zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>zero: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_zero">is-zero<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>zero: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>
</span>}

<span class="comment">// Is the decimal positive?
</span><span class="decl-fun" id="is_pos"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#is_pos">is-pos<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>pos: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_pos_2">is-pos<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>pos<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>
</span>}

<span class="comment">// Is the decimal negative?
</span><span class="decl-fun" id="is_neg"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#is_neg">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>neg: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_neg_2">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>neg<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>
</span>}

<span class="comment">// Multiply two decimals with full precision.
</span><span class="decl-fun" id="_star_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_star_">(&#42;)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">z<span class="pc">z: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">z<span class="pc">z: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_neg_2">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>neg<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">z<span class="pc">z: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#reduce">reduce<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>reduce: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp">z<span class="pc">z: <span class="tp">decimal</span></span></a>
</span>}

<span class="comment">// Decimal to the power of &#96;n&#96;
</span><span class="decl-fun" id="pow"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#pow">pow<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>pow: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>  ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">m<span class="pc">m: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">val</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_hat__1">^<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(^)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">m<span class="pc">m: <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">m<span class="pc">m: <span class="tp">int</span></span></a> )
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_neg_2">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>neg<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#div">div<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>div: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">min<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <span class="number">1</span><span class="kw op">.</span><a class="pp" href="#decimal">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>, <span class="number">3</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">m<span class="pc">m: <span class="tp">int</span></span></a>) <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>
</span>}

<span class="comment">// Rounding modes.
</span><span class="decl-type" id="type_space_round"><span class="kw">public</span> <span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#type_space_round"><span class="tp">round</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round: <span class="co">V</span></span></a> {
  <span class="comment">// Round to neareast integer, round to the even number in case of a tie
</span>  <span class="decl-con" id="con_space_Half_even"><span class="kw">con</span> <span class="decl-fun" id="is_half_even"><a class="pp">Half-even<span class="pc">round: <span class="tp">round</span></span></a></span></span>
  <span class="comment">// Round to nearest integer, round towards infinity in case of a tie
</span>  <span class="decl-con" id="con_space_Half_ceiling"><span class="kw">con</span> <span class="decl-fun" id="is_half_ceiling"><a class="pp">Half-ceiling<span class="pc">round: <span class="tp">round</span></span></a></span></span>
  <span class="comment">// Round to nearest integer, round towards negative infinity in case of a tie
</span>  <span class="decl-con" id="con_space_Half_floor"><span class="kw">con</span> <span class="decl-fun" id="is_half_floor"><a class="pp">Half-floor<span class="pc">round: <span class="tp">round</span></span></a></span></span>
  <span class="comment">// Round to nearest integer, round towards zero in case of a tie
</span>  <span class="decl-con" id="con_space_Half_truncate"><span class="kw">con</span> <span class="decl-fun" id="is_half_truncate"><a class="pp">Half-truncate<span class="pc">round: <span class="tp">round</span></span></a></span></span>
  <span class="comment">// Round to nearest integer, round away from zero in case of a tie
</span>  <span class="decl-con" id="con_space_Half_away_from_zero"><span class="kw">con</span> <span class="decl-fun" id="is_half_away_from_zero"><a class="pp">Half-away-from-zero<span class="pc">round: <span class="tp">round</span></span></a></span></span>
  <span class="comment">// Round to the minimum integer that is larger or equal
</span>  <span class="decl-con" id="con_space_Ceiling"><span class="kw">con</span> <span class="decl-fun" id="is_ceiling"><a class="pp">Ceiling<span class="pc">round: <span class="tp">round</span></span></a></span></span>
  <span class="comment">// Round to the maximum integer that is lower or equal
</span>  <span class="decl-con" id="con_space_Floor"><span class="kw">con</span> <span class="decl-fun" id="is_floor"><a class="pp">Floor<span class="pc">round: <span class="tp">round</span></span></a></span></span>
  <span class="comment">// Round to the nearest integer towards zero (i.e. &#95;truncate&#95;)
</span>  <span class="decl-con" id="con_space_Truncate"><span class="kw">con</span> <span class="decl-fun" id="is_truncate"><a class="pp">Truncate<span class="pc">round: <span class="tp">round</span></span></a></span></span>
  <span class="comment">// Round to the nearest integer away from zero, i.e. toward negative infinity for negative numbers, and positive infinity for positive numbers.
</span>  <span class="decl-con" id="con_space_Away_from_zero"><span class="kw">con</span> <span class="decl-fun" id="is_away_from_zero"><a class="pp">Away-from-zero<span class="pc">round: <span class="tp">round</span></span></a></span></span>
</span>}

<span class="comment">// Round a &#96;:decimal&#96; number to an integer an optional rounding mode &#96;rnd&#96; (=&#96;Half-even&#96;).
</span><span class="decl-fun" id="int"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">rnd<span class="pc">rnd: <span class="tp op">?</span><span class="tp">round</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">round</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Half_even"><span class="co">Half-even</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Half<span class="dash">-</span>even: <span class="tp">round</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">rnd<span class="pc">rnd: <span class="tp">round</span></span></a>)  <span class="comment">// y.exp &gt;= 0
</span>  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_pos_2">is-pos<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>pos<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#mul_exp10">mul-exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>exp10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>) <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="comment">// Round a &#96;:decimal&#96; number to a whole number with an optional rounding mode (=&#96;Half-even&#96;).
</span><span class="decl-fun" id="round"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">rnd<span class="pc">rnd: <span class="tp op">?</span><span class="tp">round</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">round</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Half_even"><span class="co">Half-even</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Half<span class="dash">-</span>even: <span class="tp">round</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">decimal</span></span></a>(<span class="number">0</span>,<a class="pp">rnd<span class="pc">rnd: <span class="tp">round</span></span></a>)
</span>}

<span class="comment">// Round the decimal-point number &#96;x&#96; to
// to a specified number of digits behind the dot &#96;prec&#96; (=&#96;0&#96;) with an optional
// rounding mode &#96;rnd&#96; (=&#96;Half-even&#96;). The precision can be negative.\
// &#96;decimal(1,485).round-to-prec(2).show == "1.48"&#96; \
// &#96;decimal(112,49).round-to-prec(-1).show == "110"&#96;
</span><span class="decl-fun" id="round_to_prec"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <span class="number">0</span>, <a class="pp">rnd<span class="pc">rnd: <span class="tp op">?</span><span class="tp">round</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">round</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Half_even"><span class="co">Half-even</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Half<span class="dash">-</span>even: <span class="tp">round</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_total"><span class="tp"><span class="effect">total</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_gt__eq__1">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>) <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">decimal</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>
  <span class="kw">val</span> <a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#reduce">reduce<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>reduce: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>
  <span class="kw">val</span> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_excl__1">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(!)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_pos_2">is-pos<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>pos<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">decimal</span></span></a> <a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a>  <span class="comment">// already less than prec precision
</span>
  <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a>,<a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#divmod_exp10">divmod-exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>divmod<span class="dash">-</span>exp10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>)

  <span class="decl-fun" id="round_half"><span class="kw">fun</span> <a class="pp">round-half<span class="pc">round<span class="dash">-</span>half: <span class="tp sp">(</span><span class="tp tpp">keep<span class="dash">-</span>on<span class="dash">-</span>eq</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">keep-on-eq<span class="pc">keep<span class="dash">-</span>on<span class="dash">-</span>eq: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> ) {
    <span class="kw">val</span> <a class="pp">half<span class="pc">half: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#exp10">exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exp10: <span class="tp sp">(</span><span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">2</span>
    <span class="kw">match</span>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a>,<a class="pp">half<span class="pc">half: <span class="tp">int</span></span></a>)) {
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> <span class="kw op">-></span> <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">keep-on-eq<span class="pc">keep<span class="dash">-</span>on<span class="dash">-</span>eq: <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a> <span class="kw">else</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> <span class="kw op">-></span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> <span class="kw op">-></span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a>
    }
  </span>}

  <span class="kw">val</span> <a class="pp">q1<span class="pc">q1: <span class="tp">int</span></span></a> <span class="kw">=</span> <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_zero">is-zero<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>zero: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a> <span class="kw">else</span> <span class="kw">match</span>(<a class="pp">rnd<span class="pc">rnd: <span class="tp">round</span></span></a>) {
    <a class="pp" href="#con_space_Half_even"><span class="co">Half-even</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Half<span class="dash">-</span>even: <span class="tp">round</span></span></a>  <span class="kw op">-></span> <a class="pp">round-half<span class="pc">round<span class="dash">-</span>half: <span class="tp sp">(</span><span class="tp tpp">keep<span class="dash">-</span>on<span class="dash">-</span>eq</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_even">is-even<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>even: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
    <a class="pp" href="#con_space_Half_floor"><span class="co">Half-floor</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Half<span class="dash">-</span>floor: <span class="tp">round</span></span></a>  <span class="kw op">-></span> <a class="pp">round-half<span class="pc">round<span class="dash">-</span>half: <span class="tp sp">(</span><span class="tp tpp">keep<span class="dash">-</span>on<span class="dash">-</span>eq</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a>)
    <a class="pp" href="#con_space_Half_ceiling"><span class="co">Half-ceiling</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Half<span class="dash">-</span>ceiling: <span class="tp">round</span></span></a>  <span class="kw op">-></span> <a class="pp">round-half<span class="pc">round<span class="dash">-</span>half: <span class="tp sp">(</span><span class="tp tpp">keep<span class="dash">-</span>on<span class="dash">-</span>eq</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a>)
    <a class="pp" href="#con_space_Half_truncate"><span class="co">Half-truncate</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Half<span class="dash">-</span>truncate: <span class="tp">round</span></span></a>  <span class="kw op">-></span> <a class="pp">round-half<span class="pc">round<span class="dash">-</span>half: <span class="tp sp">(</span><span class="tp tpp">keep<span class="dash">-</span>on<span class="dash">-</span>eq</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_pos_2">is-pos<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>pos<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
    <a class="pp" href="#con_space_Half_away_from_zero"><span class="co">Half-away-from-zero</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Half<span class="dash">-</span>away<span class="dash">-</span>from<span class="dash">-</span>zero: <span class="tp">round</span></span></a>  <span class="kw op">-></span> <a class="pp">round-half<span class="pc">round<span class="dash">-</span>half: <span class="tp sp">(</span><span class="tp tpp">keep<span class="dash">-</span>on<span class="dash">-</span>eq</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_neg_2">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>neg<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
    <a class="pp" href="#con_space_Floor"><span class="co">Floor</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Floor: <span class="tp">round</span></span></a>  <span class="kw op">-></span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a>
    <a class="pp" href="#con_space_Ceiling"><span class="co">Ceiling</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Ceiling: <span class="tp">round</span></span></a>  <span class="kw op">-></span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
    <a class="pp" href="#con_space_Truncate"><span class="co">Truncate</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Truncate: <span class="tp">round</span></span></a>  <span class="kw op">-></span> <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_excl__1">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(!)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_neg_2">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>neg<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a> <span class="kw">else</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
    <a class="pp" href="#con_space_Away_from_zero"><span class="co">Away-from-zero</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Away<span class="dash">-</span>from<span class="dash">-</span>zero: <span class="tp">round</span></span></a>  <span class="kw op">-></span> <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_excl__1">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(!)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_pos_2">is-pos<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>pos<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a> <span class="kw">else</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  }

  <span class="comment">//trace("round: " + x.showx + ", q: " + q.show + ", r: " + r.show + ", q1: " + q1.show + "e-" + prec.show )
</span>  <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">q1<span class="pc">q1: <span class="tp">int</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Optimize: Use double division when within precision bounds.
</span><span class="decl-val" id="maxexp"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#maxexp">maxexp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxexp: <span class="tp">int</span></span></a>     <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <span class="number">308</span></span>
<span class="decl-val" id="maxpd"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#maxpd">maxpd<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxpd: <span class="tp">double</span></span></a>      <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>double: <span class="co">V</span></span></a> <span class="kw">=</span> <span class="number">1.0e15</span></span>
<span class="decl-val" id="maxprecise"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#maxprecise">maxprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxprecise: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#int_6">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int<span class="postfix">.6</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="#maxpd">maxpd<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxpd: <span class="tp">double</span></span></a></span>)
<span class="decl-val" id="minprecise"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#minprecise">minprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>minprecise: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp" href="#maxprecise">maxprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxprecise: <span class="tp">int</span></span></a></span>

<span class="decl-fun" id="is_precise"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#is_precise">is-precise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>precise: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> {
  (<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_gt__1">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#minprecise">minprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>minprecise: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_lt__1">&lt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#maxprecise">maxprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxprecise: <span class="tp">int</span></span></a>)
</span>}


<span class="comment">/&#42; Divide two decimals with a given extra precision &#96;min-prec&#96; (=&#96;15&#96;).
The &#96;min-prec&#96; is the number of extra digits used to calculate inexact
divisions.

Note: the division uses up to &#96;min-prec&#96; precision using &#96;Floor&#96; rounding
for the last digit if the result is  inexact. To round differently, you can
for example divide with larger precision and use &#96;round-to-prec&#96;.
&#96;&#96;&#96;
&gt; div( decimal(2), decimal(3), 0 )
0
&gt; div( decimal(2), decimal(3), 1 )
0.6
&gt; div( decimal(2), decimal(3) )  // default precision is 15
0.6666666666666666
&gt; div( decimal(2), decimal(3) ).round-to-prec(6)
0.666667
&#96;&#96;&#96;
.
&#42;/</span>
<span class="decl-fun" id="div"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#div">div<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>div: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">min<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">min-prec<span class="pc">min<span class="dash">-</span>prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <span class="number">15</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#is_zero">is-zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>zero: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#is_zero">is-zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>zero: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">decimal</span></span></a> <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<span class="number">0</span>,<span class="number">0</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a>
  <span class="kw">val</span> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="comment">/&#42;
  // use double division if within precision bounds..
  if (min-prec &lt;= 15 &amp;&amp; e.abs &lt;= 15 &amp;&amp; x.num.is-precise &amp;&amp; y.num.is-precise) {
  val r = x.num.double / y.num.double
    if (e.is-zero) then decimal(r) else decimal(r &#42; exp10(e.double))
  }
  else {
  &#42;/</span>
  <span class="comment">// otherwise use long integer division
</span>  <span class="kw">val</span> <a class="pp">xdigits<span class="pc">xdigits: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#count_digits">count-digits<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>count<span class="dash">-</span>digits: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">val</span> <a class="pp">ydigits<span class="pc">ydigits: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#count_digits">count-digits<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>count<span class="dash">-</span>digits: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">val</span> <a class="pp">extra<span class="pc">extra: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#max">max<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>max: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<span class="number">0</span>,<a class="pp">ydigits<span class="pc">ydigits: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">xdigits<span class="pc">xdigits: <span class="tp">int</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">min-prec<span class="pc">min<span class="dash">-</span>prec: <span class="tp">int</span></span></a>
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">extra<span class="pc">extra: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_gt__1">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0</span>)
    <span class="kw">then</span> <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#mul_exp10">mul-exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>exp10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">extra<span class="pc">extra: <span class="tp">int</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">extra<span class="pc">extra: <span class="tp">int</span></span></a> )<span class="kw op">.</span><a class="pp" href="#reduce">reduce<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>reduce: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>
    <span class="kw">else</span> <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">extra<span class="pc">extra: <span class="tp">int</span></span></a> )<span class="kw op">.</span><a class="pp" href="#reduce">reduce<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>reduce: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>
</span>}

<span class="comment">// Divide two decimals using 15 digits of extra precision.
</span><span class="decl-fun" id="_fs_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_fs_">(/)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp" href="#div">div<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>div: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">min<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>)
</span>}


<span class="comment">// Compare decimals.
</span><span class="decl-fun" id="compare"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_order"><span class="tp">order</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>order: <span class="co">V</span></span></a> {
  <span class="comment">// todo: optimize further to avoid allocations.
</span>  <span class="kw">val</span> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#min">min<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>min: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
  <span class="kw">val</span> <a class="pp">xx<span class="pc">xx: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>)
  <span class="kw">val</span> <a class="pp">yy<span class="pc">yy: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>)
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">xx<span class="pc">xx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">yy<span class="pc">yy: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
</span>}


<span class="decl-fun" id="_gt_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_gt_">(&gt;)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&gt;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> (<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_gt__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_gt__eq_">(&gt;=)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_eq__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_eq__eq_">(==)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_excl__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_excl__eq_">(!=)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(!=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_lt_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_lt_">(&lt;)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&lt;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> (<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_lt__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_lt__eq_">(&lt;=)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&lt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> </span>}

<span class="comment">// The sign of a decimal number.
</span><span class="decl-fun" id="sign"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#sign">sign<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>sign: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_order"><span class="tp">order</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>order: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#sign">sign<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sign: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>
</span>}

<span class="comment">// The minimum of &#96;x&#96; and &#96;y&#96;.
</span><span class="decl-fun" id="min"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#min">min<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>min: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <a class="pp" href="#_lt__eq_">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&lt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>
</span>}

<span class="comment">// The maximum of &#96;x&#96; and &#96;y&#96;
</span><span class="decl-fun" id="max"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#max">max<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>max: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <a class="pp" href="#_gt__eq_">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>
</span>}

<span class="comment">// Take the sum of a list of decimal numbers (0 for the empty list).
</span><span class="decl-fun" id="sum"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#sum">sum<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>sum: <span class="tp sp">(</span><span class="tp tpp">ds</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">decimal</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">ds<span class="pc">ds: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">decimal</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp">ds<span class="pc">ds: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">decimal</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#foldr">foldr<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>foldr: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">z</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span></span></a>(<a class="pp" href="#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>zero: <span class="tp">decimal</span></span></a>,<a class="pp" href="#_plus_">(+)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>)
</span>}

<span class="comment">// The absolute value of a decimal
</span><span class="decl-fun" id="abs"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#is_neg">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>neg: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>
</span>}


<span class="comment">// Round a &#96;:decimal&#96; using to the largest integer that is not larger than &#96;x&#96;.
</span><span class="decl-fun" id="floor"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp" href="#con_space_Floor"><span class="co">Floor</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Floor: <span class="tp">round</span></span></a>)
</span>}

<span class="comment">// Round a &#96;:decimal&#96; to the smallest integer that is not less than &#96;x&#96;.
</span><span class="decl-fun" id="ceiling"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#ceiling">ceiling<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>ceiling: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp" href="#con_space_Ceiling"><span class="co">Ceiling</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Ceiling: <span class="tp">round</span></span></a>)
</span>}

<span class="comment">// Truncate a &#96;:decimal&#96; to an integer by rounding towards zero.
</span><span class="decl-fun" id="truncate"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#truncate">truncate<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>truncate: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp" href="#con_space_Truncate"><span class="co">Truncate</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Truncate: <span class="tp">round</span></span></a>)
</span>}


<span class="comment">// Convert a decimal to a &#96;:double&#96;. This may lose precision.
</span><span class="decl-fun" id="double"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>double: <span class="co">V</span></span></a> 
  <span class="comment">// todo: handle decimals with many digits better
</span>  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_excl__1">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(!)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_neg_2">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>neg<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span>
    <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_double-source.html#pow">pow<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>pow: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">10.0</span>,<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
  <span class="kw">else</span> 
    <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a>,<a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#divmod_exp10">divmod-exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>divmod<span class="dash">-</span>exp10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
    <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_double-source.html#exp10">exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp10: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a></span>)


<span class="comment">// Return the 'truncated' fraction, always in the range (&#96;-1.0&#96;,&#96;1.0&#96;).
// &#96;x.truncate + x.fraction == x&#96;
</span><span class="decl-fun" id="fraction"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#fraction">fraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>fraction: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_excl__1">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(!)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_neg_2">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>neg<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>zero: <span class="tp">decimal</span></span></a> <span class="kw">else</span>  (<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <a class="pp" href="#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#truncate">truncate<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>truncate: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>)
</span>}

<span class="comment">// Return the 'floored' fraction, always in the range [&#96;0&#96;,&#96;1.0&#96;).
// &#96;x.floor + x.ffraction == x&#96;
</span><span class="decl-fun" id="ffraction"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#ffraction">ffraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>ffraction: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_excl__1">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(!)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_neg_2">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>neg<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>zero: <span class="tp">decimal</span></span></a> <span class="kw">else</span>  (<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <a class="pp" href="#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>)
</span>}


<span class="comment">/&#42; --------------------------------------------------------------------------------------
    Show
 -------------------------------------------------------------------------------------- &#42;/</span>
 
<span class="comment">// Show a decimal &#96;d&#96; using its internal representation.
</span><span class="decl-fun" id="show_raw"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#show_raw">show-raw<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>show<span class="dash">-</span>raw: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>) {
  <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">"e"</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
</span>}

<span class="comment">// Show a decimal &#96;d&#96; with a given precision &#96;prec&#96; (=&#96;-1000&#96;).
// The precision specifies the  number of digits after the dot (in either scientific of fixed-point notation).
// If the precision is negative, &#95;at most&#95; &#96;prec&#96; digits are displayed, while for a positive
// precision, exactly &#96;prec&#96; digits behind the dot are displayed.
// This uses &#96;show-fixed&#96; when the exponent of &#96;d&#96; in scientific notation is larger than -5
// and smaller than the precision (or 15 in case of a negative precision), otherwise it uses &#96;show-exp&#96;.
</span><span class="decl-fun" id="show"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <span class="number">-1000</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exponent">exponent<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exponent: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_gt__1">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">-5</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_lt__1">&lt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> (<span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_neg_2">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>neg<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span>  <span class="number">15</span> <span class="kw">else</span> <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>))
    <span class="kw">then</span> <a class="pp" href="#show_fixed">show-fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>show<span class="dash">-</span>fixed: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> )
    <span class="kw">else</span> <a class="pp" href="#show_exp">show-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>show<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> )
</span>}

<span class="comment">// The exponent of a decimal if displayed in scientific notation.\
// &#96;11.2e-1.decimal.exponent == 0&#96;
</span><span class="decl-fun" id="exponent"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#exponent">exponent<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exponent: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> {
  <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#count_digits">count-digits<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>count<span class="dash">-</span>digits: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">1</span>
</span>}

<span class="comment">/&#42; Show a decimal &#96;d&#96; with a given precision &#96;prec&#96; (=&#96;-1000&#96;) in fixed-point notation.
The precision specifies the  number of digits after the dot.
If the precision is negative, &#95;at most&#95;  &#96;prec&#96; digits after the dot are displayed,
while for a positive precision, exactly &#96;prec&#96; digits are used.
&#96;&#96;&#96;
&gt; decimal(1,-1).show-fixed
"0.1"
&gt; 0.1.decimal.show-fixed
"0.1000000000000000055511151231257827021181583404541015625"
&gt; 0.1.decimal.show-fixed(20)
"0.1000000000000000555"
&gt; 0.1.decimal.show-fixed(-20)
"0.1000000000000000555"
&gt; decimal(1,-1).show-fixed(20)
"0.1000000000000000000"
&#96;&#96;&#96;
.
&#42;/</span>
<span class="decl-fun" id="show_fixed"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#show_fixed">show-fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>show<span class="dash">-</span>fixed: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <span class="number">-1000</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> 
  <span class="kw">val</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">decimal</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_gt__eq__1">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0</span> <span class="kw">then</span>
    <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a> <span class="kw">=</span> <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">prec</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_lt__eq__1">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="number">0</span> <span class="kw">then</span> <span class="st">""</span> <span class="kw">else</span> <span class="st">"."</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#repeat">repeat<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>repeat: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<span class="st">"0"</span>,<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)
    <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#repeat">repeat<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>repeat: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<span class="st">"0"</span>,<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a>
  <span class="kw">else</span> 
    <span class="kw">val</span> <a class="pp">digits<span class="pc">digits: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
    <span class="kw">val</span> <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a>  <span class="kw">=</span> <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#is_neg">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>neg: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">"-"</span> <span class="kw">else</span> <span class="st">""</span>
    <span class="kw">val</span> <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>     <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
    <span class="kw">val</span> <a class="pp">man<span class="pc">man: <span class="tp">int</span></span></a>   <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#cdiv_exp10">cdiv-exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>cdiv<span class="dash">-</span>exp10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>,<a class="pp">digits<span class="pc">digits: <span class="tp">int</span></span></a>)
    <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#mul_exp10">mul-exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>exp10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">man<span class="pc">man: <span class="tp">int</span></span></a>,<a class="pp">digits<span class="pc">digits: <span class="tp">int</span></span></a>)
    <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">man<span class="pc">man: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">frac<span class="pc">frac: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pad_left">pad-left<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pad<span class="dash">-</span>left: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">width</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fill</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">digits<span class="pc">digits: <span class="tp">int</span></span></a>,<span class="st">'0'</span>)<span class="kw op">.</span><a class="pp" href="#show_frac">show-frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>show<span class="dash">-</span>frac: <span class="tp sp">(</span><span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a></span>)

<span class="comment">/&#42; Show a decimal &#96;d&#96; with a given precision &#96;prec&#96; (=&#96;-1000&#96;) in scientific notation.
The precision specifies the  number of digits after the dot, i.e.
the number of significant digits is &#96;prec+1&#96;.
If the precision is negative, &#95;at most&#95; &#96;prec&#96; digits are displayed, and if
it is positive exactly &#96;prec&#96; digits are used.
&#96;&#96;&#96;
&gt; decimal(1,-1).show-exp
"1e-1"
&gt; 1.1.decimal.show-exp
"1.100000000000000088817841970012523233890533447265625"
&gt; 1.1.decimal.show-exp(-20)
"1.10000000000000008882"
&gt; 0.125.decimal.show-exp(-20)
"1.25e-1"
&gt; 0.125.decimal.show-exp(20)
"1.25000000000000000000e-1"
&#96;&#96;&#96;
.
&#42;/</span>
<span class="decl-fun" id="show_exp"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#show_exp">show-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>show<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="co">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="kw">=</span> <span class="number">-1000</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>   <span class="kw">=</span> <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">decimal</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exponent">exponent<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exponent: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
  <span class="kw">val</span> <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>  <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
  <span class="kw">val</span> <a class="pp">digits<span class="pc">digits: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#count_1">count<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>count<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">val</span> <a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">digits<span class="pc">digits: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">1</span>
  <span class="kw">val</span> <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a>  <span class="kw">=</span> <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#is_neg">is-neg<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>is<span class="dash">-</span>neg: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">"-"</span> <span class="kw">else</span> <span class="st">""</span>
  <span class="kw">val</span> <a class="pp">exponent<span class="pc">exponent: <span class="tp">string</span></span></a>  <span class="kw">=</span> <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__1">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="number">0</span>) <span class="kw">then</span> <span class="st">""</span> <span class="kw">else</span> <span class="st">"e"</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_pos_2">is-pos<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>pos<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">"+"</span> <span class="kw">else</span> <span class="st">""</span>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
  <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#head_3">head<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>head<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#tail_2">tail<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>tail<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#show_frac">show-frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>show<span class="dash">-</span>frac: <span class="tp sp">(</span><span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">exponent<span class="pc">exponent: <span class="tp">string</span></span></a>
</span>}

<span class="decl-fun" id="show_frac"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#show_frac">show-frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>show<span class="dash">-</span>frac: <span class="tp sp">(</span><span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">frac-trim<span class="pc">frac<span class="dash">-</span>trim: <span class="tp">string</span></span></a>  <span class="kw">=</span> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#trim_right_1">trim-right<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>trim<span class="dash">-</span>right<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sub</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<span class="st">"0"</span>)
  <span class="kw">val</span> <a class="pp">frac-full<span class="pc">frac<span class="dash">-</span>full: <span class="tp">string</span></span></a>  <span class="kw">=</span><span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_gt__eq__1">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0</span>) <span class="kw">then</span> <a class="pp">frac-trim<span class="pc">frac<span class="dash">-</span>trim: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pad_right">pad-right<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pad<span class="dash">-</span>right: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">width</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fill</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>,<span class="st">'0'</span>) <span class="kw">else</span> <a class="pp">frac-trim<span class="pc">frac<span class="dash">-</span>trim: <span class="tp">string</span></span></a>
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">frac-full<span class="pc">frac<span class="dash">-</span>full: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_empty_2">is-empty<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>empty<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">""</span> <span class="kw">else</span> <span class="st">"."</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__plus__1">++<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(++)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">frac-full<span class="pc">frac<span class="dash">-</span>full: <span class="tp">string</span></span></a>
</span>}
</pre>

</body>
</html>
