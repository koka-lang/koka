<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=1.0" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>types.kk documentation</title>
</head>

<body class="koka doc body madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2012-2024, Microsoft Research, Daan Leijen.

  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the LICENSE file at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Primitive types and functions.

   This module is implicitly imported and all functions and types
   are always available.
   These types are required to be defined for the compiler
   to work correctly (i.e. types like &#96;:int&#96; or &#96;:div&#96;)

   The &#95;kinds&#95; of types are all builtin:

   &#42; &#96;V&#96;   value types (i.e. the star kind)
   &#42; &#96;E&#96;   effect rows (&#96;&lt;div,exn|e&gt;&#96;)
   &#42; &#96;X&#96;   a single effect (&#96;div&#96;, &#96;exn&#96;, &#96;parse&#96;, etc.), also called atomic effect
   &#42; &#96;H&#96;   heap types (always a phantom type without actual values)
   &#42; &#96;HX&#96;  a short-hand for user defined effect handlers of kind &#96;(E,V) -&gt; V&#96;

&#42;/</span>
<span class="kw">module</span> <a class="pp" href="std_core_types.html#_null_"><span class="mo">std/core/types</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types</span></span></a>

<span class="kw">pub</span> <span class="kw">infixr</span> <span class="number">80</span>  <span class="op">(^)</span>
<span class="kw">pub</span> <span class="kw">infixl</span> <span class="number">70</span>  <span class="op">(&#42;)</span>, <span class="op">(%)</span>, <span class="op">(/)</span>, cdiv, cmod
<span class="kw">pub</span> <span class="kw">infixr</span> <span class="number">60</span>  <span class="op">(++)</span>
<span class="kw">pub</span> <span class="kw">infixl</span> <span class="number">60</span>  <span class="op">(+)</span>, <span class="op">(-)</span>
<span class="kw">pub</span> <span class="kw">infixr</span> <span class="number">55</span>  <span class="op">(++.)</span>
<span class="kw">pub</span> <span class="kw">infix</span>  <span class="number">40</span>  <span class="op">(!=)</span>, <span class="op">(==)</span>, <span class="op">(&lt;=)</span>, <span class="op">(&gt;=)</span>, <span class="op">(&lt;)</span>, <span class="op">(&gt;)</span>
<span class="kw">pub</span> <span class="kw">infixr</span> <span class="number">30</span>  <span class="op">(&amp;&amp;)</span>
<span class="kw">pub</span> <span class="kw">infixr</span> <span class="number">20</span>  <span class="op">(||)</span>
<span class="comment">// prefix     (!), (-)
</span>

<span class="comment">// build: 131
</span>
<span class="comment">// ----------------------------------------------------------------------------
// Core types
// ----------------------------------------------------------------------------
</span>
<span class="comment">// An arbitrary precision signed integer.
// See &#96;module std/core/int&#96; for integer operations.
</span><span class="decl-type" id="type_space_int"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a></span>

<span class="comment">// A 64-bit IEEE 754 double precision floating point value.
// See &#96;module std/num/float64&#96; for operations on &#96;:float64&#96;s.
</span><span class="decl-type" id="type_space_float64"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_float64"><span class="tp">float64</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>float64: <span class="co">V</span></span></a></span>

<span class="comment">// A unicode character.
// Characters are unicode &#95;codepoint&#95;\/s.
// This is different from a unicode &#95;grapheme&#95; which represents a single displayed
// symbol and can consists of multiple codepoints due to combining characters and marks.
// (see also &#96;module std/core/char&#96; and the &#96;module std/text/unicode&#96; module).
</span><span class="decl-type" id="type_space_char"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="co">V</span></span></a></span>

<span class="comment">// A string is a sequence of unicode character points (&#96;char&#96;).
// The encoding of a string is internal and there
// is no constant-time indexing of characters in a string.
// Use the &#96;:sslice&#96; type for efficient matching and retrieving
// sub-strings from string. See &#96;module std/core/string&#96; and
// &#96;module std/core/sslice&#96; for string operations.
</span><span class="decl-type" id="type_space_string"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a></span>

<span class="comment">// A 8-bit signed integer (represented in two's complement).
// Provides no operations and used only for storage and interaction with external code.
</span><span class="decl-type" id="type_space_int8"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_int8"><span class="tp">int8</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int8: <span class="co">V</span></span></a></span>

<span class="comment">// A 16-bit signed integer (represented in two's complement).
// Provides no operations and used only for storage and interaction with external code.
</span><span class="decl-type" id="type_space_int16"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_int16"><span class="tp">int16</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int16: <span class="co">V</span></span></a></span>

<span class="comment">// A 32-bit signed integer (represented in two's complement).
// See the &#96;module std/num/int32&#96; module for operations on 32-bit integers.
</span><span class="decl-type" id="type_space_int32"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_int32"><span class="tp">int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int32: <span class="co">V</span></span></a></span>

<span class="comment">// A 64-bit signed integer (represented in two's complement).
// See the &#96;module std/num/int64&#96; module for operations on 64-bit integers.
</span><span class="decl-type" id="type_space_int64"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_int64"><span class="tp">int64</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int64: <span class="co">V</span></span></a></span>

<span class="comment">// A signed two's complement integer equal to a signed &#96;size&#95;t&#96; in C, i.e.
// it can hold the byte size of any object, in particular the maximum possible
// byte size of a vector or string.
// Provides no operations but is used mostly for interaction with external code.
// The Javascript backend uses &#96;int32&#96; for this.
</span><span class="decl-type" id="type_space_ssize__t"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_ssize__t"><span class="tp">ssize&#95;t</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ssize&#95;t: <span class="co">V</span></span></a></span>

<span class="comment">// A signed two's complement integer equal to an &#96;intptr&#95;t&#96; in C, i.e.
// it has the same bit-size as a native pointer (&#96;void&#42;&#96;).
// Provides no operations but is used mostly for interaction with external code.
// The Javascript backend uses &#96;int64&#96; for this.
</span><span class="decl-type" id="type_space_intptr__t"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_intptr__t"><span class="tp">intptr&#95;t</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>intptr&#95;t: <span class="co">V</span></span></a></span>

<span class="comment">// A 32-bit IEEE 754 single precision floating point value.
// Provides currently no operations and currently only used for storage and for interaction with external code.
</span><span class="decl-type" id="type_space_float32"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_float32"><span class="tp">float32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>float32: <span class="co">V</span></span></a></span>

<span class="comment">// The type of immutable polymorphic arrays is called &#96;:vector&#96;.
// See &#96;module std/core/vector&#96; for vector operations.
</span><span class="decl-type" id="type_space_vector"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_vector"><span class="tp">vector</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>vector: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a></span><span class="tp sp">&gt;</span>

<span class="comment">// An any type. Used for external calls.
</span><span class="decl-type" id="type_space_any"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_any"><span class="tp">any</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>any: <span class="co">V</span></span></a></span>

<span class="comment">// Internal type used for in-place update of unique pattern matches.
</span><span class="kw">pub</span> <span class="tp kw">type</span> <span class="tp">@reuse</span>

<span class="kw">pub</span> <span class="kw">extern</span> @no<span class="dash">-</span>reuse() <span class="tp kw op">:</span> <a class="pp" href="#type_space_total"><span class="tp"><span class="effect">@reuse</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a>
  c inline  <span class="st">"NULL"</span>
  js inline <span class="st">"null"</span>


<span class="comment">// The &#95;total&#95; effect represents the absence of any effect.
// Usually written as &#96;&lt;&gt;&#96;
</span><span class="decl-type" id="type_space_total"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_total"><span class="tp"><span class="effect">total</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a> <span class="tp sp">::</span> </span><span class="co">E</span>

<span class="comment">// The effect constructor extends an effect row with another effect.
// Usually written as &#96;&lt;&#95;|&#95;&gt;&#96;
</span><span class="decl-type" id="type_space_effect_extend"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_effect_extend"><span class="tp">effect-extend</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>effect<span class="dash">-</span>extend: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">E</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="co">X</span>,<span class="co">E</span>) <span class="kw op">-></span> </span><span class="co">E</span>

<span class="comment">// The divergence effect: a divergent function may not terminate.
</span><span class="decl-type" id="type_space_div"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_div"><span class="tp"><span class="effect">div</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="co">X</span></span></a> <span class="tp sp">::</span> </span><span class="co">X</span>

<span class="comment">// The non-determinism effect.
</span><span class="decl-type" id="type_space_ndet"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ndet: <span class="co">X</span></span></a> <span class="tp sp">::</span> </span><span class="co">X</span>

<span class="comment">// The alloc effect signifies a function may allocate in a heap &#96;:h&#96;
</span><span class="decl-type" id="type_space_alloc"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_alloc"><span class="tp">alloc</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>alloc: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a> <span class="tp sp">::</span> <span class="co">H</span> <span class="kw op">-></span> </span><span class="co">X</span>

<span class="comment">// The read effect: signifies that a function may read from from heap &#96;:h&#96;.
</span><span class="decl-type" id="type_space_read"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a> <span class="tp sp">::</span> <span class="co">H</span> <span class="kw op">-></span> </span><span class="co">X</span>

<span class="comment">// The write effect: signifies that a function may write to heap &#96;:h&#96;.
</span><span class="decl-type" id="type_space_write"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a> <span class="tp sp">::</span> <span class="co">H</span> <span class="kw op">-></span> </span><span class="co">X</span>

<span class="comment">// Stateful functions can manipulate heap &#96;:h&#96; using allocations, reads and writes.
</span><span class="decl-alias" id="type_space_st"><span class="kw">pub</span> <span class="tp kw">alias</span> <a class="pp" href="std_core_types.html#type_space_st"><span class="tp">st</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>st: <span class="co">H</span> <span class="kw op">-></span> <span class="co">E</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span> <span class="tp kw">=</span> <a class="pp" href="#type_space_total"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a><a class="pp" href="#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span> <a class="pp" href="#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span> <a class="pp" href="#type_space_alloc"><span class="tp">alloc</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>alloc: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span></span><span class="tp sp">&gt;</span>

<span class="comment">// The &#96;:global&#96; heap is a special heap constant to denote the global shared heap
</span><span class="decl-type" id="type_space_global"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_global"><span class="tp">global</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>global: <span class="co">H</span></span></a> <span class="tp sp">::</span> </span><span class="co">H</span>

<span class="comment">// Handled effects are lifted to an atomic effect using the &#96;:handled&#96; type constructor
// All user defined effects are &#96;:handled&#96; since they require a handler to be dismissed.
// In contrast, some built-in effects, like &#96;:div&#96; or &#96;:st&#96; do not require a handler
// as these are handled by the system.
// In particular, the runtime evidence vector only contains &#96;:handled&#96; (and &#96;:handled1&#96;) effects.
</span><span class="decl-type" id="type_space_handled"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_handled"><span class="tp">handled</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>handled: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>) <span class="kw op">-></span> <span class="co">X</span></span></a>    <span class="tp sp">::</span> <span class="co">HX</span> <span class="kw op">-></span> </span><span class="co">X</span>;

<span class="comment">// Linear effects are lifted to an atomic effect using the &#96;:handled1&#96; type constructor
</span><span class="decl-type" id="type_space_handled1"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_handled1"><span class="tp">handled1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>handled1: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>) <span class="kw op">-></span> <span class="co">X</span></span></a>   <span class="tp sp">::</span> <span class="co">HX</span> <span class="kw op">-></span> </span><span class="co">X</span>;

<span class="comment">// Named effects are lifted to an atomic effect with the &#96;:nhandled&#96; type constructor.
// In contrast to &#96;:handled&#96; effects, these effects are not passed in the evidence vector.
</span><span class="decl-type" id="type_space_nhandled"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_nhandled"><span class="tp">nhandled</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>nhandled: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>) <span class="kw op">-></span> <span class="co">X</span></span></a>    <span class="tp sp">::</span> <span class="co">HX</span> <span class="kw op">-></span> </span><span class="co">X</span>;

<span class="comment">// Linear named effects are lifted to an atomic effect using the &#96;:nhandled1&#96; type constructor
</span><span class="decl-type" id="type_space_nhandled1"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_nhandled1"><span class="tp">nhandled1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>nhandled1: <span class="tp sp">(</span><span class="tp sp">(</span><span class="co">E</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span>) <span class="kw op">-></span> <span class="co">X</span></span></a>   <span class="tp sp">::</span> <span class="co">HX</span> <span class="kw op">-></span> </span><span class="co">X</span>;


<span class="comment">// ----------------------------------------------------------------------------
// Standard Data types
// ----------------------------------------------------------------------------
</span>
<span class="comment">// The &#96;:void&#96; type is empty and has no constructors.
// See also the &#96;:()&#96; unit type and the &#96;:bool&#96; type.
</span><span class="decl-type" id="type_space_void"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_void"><span class="tp">void</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>void: <span class="co">V</span></span></a></span>

<span class="comment">// The type of booleans has two inhabitants: &#96;True&#96; and &#96;False&#96;.
</span><span class="decl-type" id="type_space_bool"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  <span class="decl-con" id="con_space_False"><span class="kw">con</span> <a class="pp" href="std_core_types.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a></span>
  <span class="decl-con" id="con_space_True"><span class="kw">con</span> <a class="pp" href="std_core_types.html#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a></span></span>

<span class="comment">// The unit type &#96;:unit&#96; is inhabited by just a single value, namely &#96;Unit&#96;.
// Usually the type and constructor are written as &#96;()&#96;.
// See also the &#96;:void&#96; type and the &#96;:bool&#96; type.
</span><span class="decl-type" id="type_space_unit"><span class="kw">pub</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Unit"><a class="pp" href="std_core_types.html#type_space_unit"><span class="tp">unit</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a></span></span>

<span class="comment">// A pair of values &#96;:a&#96; and &#96;:b&#96;. Usually written as &#96;(x,y)&#96; (for types and terms)
</span><span class="decl-type" id="type_space_tuple2"><span class="kw">pub</span> value <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Tuple2"><a class="pp" href="std_core_types.html#type_space_tuple2"><span class="tp">tuple2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>tuple2: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>(<a class="pp" href="std_core_types.html#tuple2_fs_fst">fst<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple2<span class="fslash">/</span></span>fst: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple2</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>,<a class="pp" href="std_core_types.html#tuple2_fs_snd">snd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple2<span class="fslash">/</span></span>snd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple2</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">b</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a></span></span>)

<span class="comment">// A triple of values. Usually written as &#96;(x,y,z)&#96; (for types and terms)
</span><span class="decl-type" id="type_space_tuple3"><span class="kw">pub</span> value <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Tuple3"><a class="pp" href="std_core_types.html#type_space_tuple3"><span class="tp">tuple3</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>tuple3: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">c</span><span class="pc">c: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>(<a class="pp" href="std_core_types.html#tuple3_fs_fst">fst<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple3<span class="fslash">/</span></span>fst: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple3</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>,<a class="pp" href="std_core_types.html#tuple3_fs_snd">snd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple3<span class="fslash">/</span></span>snd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple3</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">b</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a>,<a class="pp" href="std_core_types.html#tuple3_fs_thd">thd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple3<span class="fslash">/</span></span>thd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple3</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">c</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="co">V</span></span></a></span></span>)

<span class="comment">// A quadruple of values. Usually written as &#96;(a,b,c,d)&#96; (for types and terms)
</span><span class="decl-type" id="type_space_tuple4"><span class="kw">pub</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Tuple4"><a class="pp" href="std_core_types.html#type_space_tuple4"><span class="tp">tuple4</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>tuple4: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">c</span><span class="pc">c: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">d</span><span class="pc">d: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>(<a class="pp" href="std_core_types.html#tuple4_fs_fst">fst<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple4<span class="fslash">/</span></span>fst: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple4</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>,<a class="pp" href="std_core_types.html#tuple4_fs_snd">snd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple4<span class="fslash">/</span></span>snd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple4</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">b</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a>,<a class="pp" href="std_core_types.html#tuple4_fs_thd">thd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple4<span class="fslash">/</span></span>thd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple4</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">c</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="co">V</span></span></a>,<a class="pp" href="std_core_types.html#tuple4_fs_field4">field4<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple4<span class="fslash">/</span></span>field4: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple4</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">d</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">d</span><span class="pc">d: <span class="co">V</span></span></a></span></span>)

<span class="comment">// A quintuple of values. Usually written as &#96;(a,b,c,d,e)&#96; (for types and terms)
</span><span class="decl-type" id="type_space_tuple5"><span class="kw">pub</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Tuple5"><a class="pp" href="std_core_types.html#type_space_tuple5"><span class="tp">tuple5</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>tuple5: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">c</span><span class="pc">c: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">d</span><span class="pc">d: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">e</span><span class="pc">e: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>(<a class="pp" href="std_core_types.html#tuple5_fs_fst">fst<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple5<span class="fslash">/</span></span>fst: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple5</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>,<a class="pp" href="std_core_types.html#tuple5_fs_snd">snd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple5<span class="fslash">/</span></span>snd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple5</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">b</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a>,<a class="pp" href="std_core_types.html#tuple5_fs_thd">thd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple5<span class="fslash">/</span></span>thd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple5</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">c</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="co">V</span></span></a>,<a class="pp" href="std_core_types.html#tuple5_fs_field4">field4<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple5<span class="fslash">/</span></span>field4: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple5</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">d</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">d</span><span class="pc">d: <span class="co">V</span></span></a>,<a class="pp" href="std_core_types.html#tuple5_fs_field5">field5<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">tuple5<span class="fslash">/</span></span>field5: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">d</span><span class="tp sp">,</span><span class="tp tv">a1</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">tuple5</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">c</span><span class="tp sp">,</span> <span class="tp tv">d</span><span class="tp sp">,</span> <span class="tp tv">a1</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a1</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">e</span><span class="pc">e: <span class="co">V</span></span></a></span></span>)

<span class="comment">// The &#96;:maybe&#96; type is used to represent either a value (&#96;Just(x)&#96;) or &#96;Nothing&#96;.
// This type is often used to represent values that can be &#95;null&#95;.
// See also &#96;module std/core/maybe&#96;.
</span><span class="decl-type" id="type_space_maybe"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="comment">// No result
</span>  <span class="decl-con" id="con_space_Nothing"><span class="kw">con</span> <a class="pp" href="std_core_types.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a></span>
  <span class="comment">// A single result
</span>  <span class="decl-con" id="con_space_Just"><span class="kw">con</span> <a class="pp" href="std_core_types.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( value <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> </span></span>)

<span class="comment">// The choice type represents one of two possible types &#96;:a&#96; or &#96;:b&#96;.
// See also &#96;module std/core/either&#96;.
</span><span class="decl-type" id="type_space_either"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_either"><span class="tp">either</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>either: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="comment">// Left result, usually used for errors.
</span>  <span class="decl-con" id="con_space_Left"><span class="kw">con</span> <a class="pp" href="std_core_types.html#con_space_Left"><span class="co">Left</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Left: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">left</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>( left <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> </span>)
  <span class="comment">// Right result, usually used for success.
</span>  <span class="decl-con" id="con_space_Right"><span class="kw">con</span> <a class="pp" href="std_core_types.html#con_space_Right"><span class="co">Right</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Right: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">right</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>( right <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a> </span></span>)

<span class="comment">// An enumeration to represent order: &#96;Lt&#96;, &#96;Eq&#96;, or &#96;Gt&#96;.
// See also &#96;module std/core/order&#96;.
</span><span class="decl-type" id="type_space_order"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_order"><span class="tp">order</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>order: <span class="co">V</span></span></a>
  <span class="comment">// lower-than
</span>  <span class="decl-con" id="con_space_Lt"><a class="pp" href="std_core_types.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a></span>
  <span class="comment">// equal
</span>  <span class="decl-con" id="con_space_Eq"><a class="pp" href="std_core_types.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a></span>
  <span class="comment">// greater-than
</span>  <span class="decl-con" id="con_space_Gt"><a class="pp" href="std_core_types.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a></span></span>

<span class="comment">// Represent two elements in ascending order. This is used to
// allow comparison on elements to be used linearly for &#96;fip&#96; functions.
// See also &#96;module std/core/order&#96;
</span><span class="decl-type" id="type_space_order2"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_order2"><span class="tp">order2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>order2: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="comment">// The elements compared lower-than, with &#96;lt &lt; gt&#96;.
</span>  <span class="decl-con" id="con_space_Lt2"><a class="pp" href="std_core_types.html#con_space_Lt2"><span class="co">Lt2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Lt2: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">lt</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">gt</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order2</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( lt<span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>, gt <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> </span>)
  <span class="comment">// The elements compared equal (with value &#96;eq&#96;).
</span>  <span class="decl-con" id="con_space_Eq2"><a class="pp" href="std_core_types.html#con_space_Eq2"><span class="co">Eq2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Eq2: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">eq</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order2</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( eq<span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> </span>)
  <span class="comment">// The elements compared greater-than, with &#96;lt &lt; gt&#96;.
</span>  <span class="decl-con" id="con_space_Gt2"><a class="pp" href="std_core_types.html#con_space_Gt2"><span class="co">Gt2</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Gt2: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">lt</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">gt</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order2</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( lt<span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>, gt <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> </span></span>)


<span class="comment">// The type of lists, which can be either empty (&#96;Nil&#96;) or an element followed
// by a list (&#96;Cons&#96;).
// See &#96;module std/core/list&#96; for operations on lists.
</span><span class="decl-type" id="type_space_list"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="comment">// The empty list.
</span>  <span class="decl-con" id="con_space_Nil"><span class="kw">con</span> <a class="pp" href="std_core_types.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a></span>                  <span class="comment">// note: must come first; see Core/Core.hs
</span>  <span class="comment">// A &#96;&#96;head&#96;&#96;  element followed by the &#96;&#96;tail&#96;&#96;  of the list.
</span>  <span class="decl-con" id="con_space_Cons"><span class="kw">con</span> <a class="pp" href="std_core_types.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(head<span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>, tail <span class="tp kw op">:</span> <a class="pp" href="#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>list: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> </span></span>)


<span class="comment">// Explicitly box values using the &#96;Box&#96; constructor.
</span><span class="decl-type" id="type_space_box"><span class="kw">pub</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_box"><span class="tp">box</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>box: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="decl-con" id="con_space_Box"><span class="kw">con</span> <a class="pp" href="std_core_types.html#con_space_Box"><span class="co">Box</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Box: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">unbox</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">box</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp" href="std_core_types.html#box_fs_unbox">unbox<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">box<span class="fslash">/</span></span>unbox: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">box</span> <span class="tp kw op">:</span> <span class="tp">box</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> </span></span>)


<span class="comment">/&#42;
// Explicitly heap allocate using the &#96;Hbox&#96; constructor.
pub ref type hbox&lt;a&gt;
  con Hbox( unhbox : a )

pub fun hbox( x : a ) : hbox&lt;a&gt;
  Hbox(x)
&#42;/</span>

<span class="comment">// Prevent inlining an expression by passing it to &#96;keep&#96; (which is a non-inlineable identity function)
</span><span class="decl-fun" id="keep"><span class="kw">pub</span> noinline fip <span class="kw">fun</span> <a class="pp" href="std_core_types.html#keep">keep<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>keep: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">1952</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="number">1958</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_total"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a>
  </span><a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">1952</span></span></a>

<span class="comment">// ----------------------------------------------------------------------------
// Standard functions
// ----------------------------------------------------------------------------
</span>
<span class="comment">// The identity function returns its argument unchanged
</span><span class="decl-fun" id="id"><span class="kw">pub</span> fip <span class="kw">fun</span> <a class="pp" href="std_core_types.html#id">id<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>id: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">1941</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="number">1947</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_total"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a>
  </span><a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">1941</span></span></a>

<span class="comment">// Logical conjunction. This is compiled specially avoid evaluating the second argument if &#96;x==False&#96;.
</span><span class="decl-fun" id="_amp__amp_"><span class="kw">pub</span> fip <span class="kw">fun</span> <a class="pp" href="std_core_types.html#_amp__amp_">(&amp;&amp;)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>   <span class="comment">// inlined in the compiler for short-circuit evaluation
</span>  <span class="kw">if</span> <a class="pp">x<span class="pc">x: <span class="tp">bool</span></span></a> <span class="kw">then</span> <a class="pp">y<span class="pc">y: <span class="tp">bool</span></span></a> <span class="kw">else</span> <a class="pp" href="#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a></span>

<span class="comment">// Logical disjunction. This is compiled specially avoid evaluating the second argument if &#96;x==True&#96;.
</span><span class="decl-fun" id="_bar__bar_"><span class="kw">pub</span> fip <span class="kw">fun</span> <a class="pp" href="std_core_types.html#_bar__bar_">(||)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>  <span class="comment">// inlined in the compiler for short-circuit evaluation
</span>  <span class="kw">if</span> <a class="pp">x<span class="pc">x: <span class="tp">bool</span></span></a> <span class="kw">then</span> <a class="pp" href="#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <span class="kw">else</span> </span><a class="pp">y<span class="pc">y: <span class="tp">bool</span></span></a>

<span class="comment">// Logical negation
</span><span class="decl-fun" id="bool_fs__excl_"><span class="kw">pub</span> fip <span class="kw">fun</span> <a class="pp" href="std_core_types.html#bool_fs__excl_">bool/(!)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">bool<span class="fslash">/</span></span>(!): <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">b<span class="pc">b: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  <span class="kw">if</span> <a class="pp">b<span class="pc">b: <span class="tp">bool</span></span></a> <span class="kw">then</span> <a class="pp" href="#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a> <span class="kw">else</span> <a class="pp" href="#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a></span>

<span class="comment">// Logical negation
</span><span class="decl-fun" id="not"><span class="kw">pub</span> fip <span class="kw">fun</span> <a class="pp" href="std_core_types.html#not">not<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>not: <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">b<span class="pc">b: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> <a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a>
  <span class="kw">if</span> <a class="pp">b<span class="pc">b: <span class="tp">bool</span></span></a> <span class="kw">then</span> <a class="pp" href="#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a> <span class="kw">else</span> <a class="pp" href="#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a></span>


<span class="kw">extern</span> <span class="kw">import</span>
  js file <span class="st">"inline/types.js"</span>

<span class="comment">// Convert an integer to an &#96;:int32&#96;. The number is &#95;clamped&#95; to the maximal or minimum &#96;:int32&#96;
// value if it is outside the range of an &#96;:int32&#96;.
// Needed for control flow contexts in &#96;module std/core/hnd&#96;
</span><span class="kw">pub</span> inline fip <span class="kw">extern</span> @make<span class="dash">-</span>int32( i <span class="tp kw op">:</span> <a class="pp" href="#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space_int32"><span class="tp">int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int32: <span class="co">V</span></span></a>
  c  <span class="st">"kk&#95;integer&#95;clamp32"</span>
  cs <span class="st">"Primitive.IntToInt32"</span>
  js <span class="st">"$std&#95;core&#95;types.&#95;int&#95;clamp32"</span>


<span class="comment">// Convert an integer to an &#96;:ssize&#95;t&#96;. The number is &#95;clamped&#95; to the maximal or minimum &#96;:ssize&#95;t&#96;
// value if it is outside the range of an &#96;:ssize&#95;t&#96;.
// Needed for evidence indices in &#96;module std/core/hnd&#96;
</span><span class="kw">pub</span> fip <span class="kw">extern</span> @make<span class="dash">-</span>ssize&#95;t( <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space_ssize__t"><span class="tp">ssize&#95;t</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ssize&#95;t: <span class="co">V</span></span></a>
  c  <span class="st">"kk&#95;integer&#95;clamp&#95;ssize&#95;t"</span>
  cs <span class="st">"Primitive.IntToInt32"</span>
  js <span class="st">"$std&#95;core&#95;types.&#95;int&#95;clamp32"</span>


<span class="comment">// Append two strings
</span><span class="decl-fun" id="_plus__plus_"><span class="kw">pub</span> <span class="kw">extern</span> <a class="pp" href="std_core_types.html#_plus__plus_">(++)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(++): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>
  c <span class="st">"kk&#95;string&#95;cat"</span>
  inline <span class="st">"(#1 + #2)"</span></span>


<span class="comment">// &#95;Internal&#95;: generated by type inference and later refined into one of the &#96;open&#96; variants in &#96;std/core/hnd&#96;.
</span><span class="kw">pub</span> noinline <span class="kw">extern</span> @open<span class="op">&lt;</span><a class="pp"><span class="tp"><span class="effect">e1</span></span><span class="pc">e1: <span class="co">E</span></span></a><span class="tp sp">::</span><span class="co">E</span>,<a class="pp"><span class="tp"><span class="effect">e2</span></span><span class="pc">e2: <span class="co">E</span></span></a><span class="tp sp">::</span><span class="co">E</span>,<a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a>,<a class="pp"><span class="tp">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="op">&gt;</span>( <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">1883</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp"><span class="tp tv"><span class="effect">e2</span></span><span class="pc">e2: <span class="co">E</span></span></a> <a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a>
  inline <span class="st">"#1"</span>


<span class="comment">// ----------------------------------------------------------------------------
// References
// ----------------------------------------------------------------------------
</span>
<span class="comment">// The predicate &#96;:hdiv&lt;h,a,e&gt;&#96; signifies that if the type &#96;:a&#96; contains a reference to &#96;:h&#96;,
// then the effect &#96;:e&#96; must contain the divergent effect (&#96;:div&#96;). This constraint is generated
// when reading from the heap (see &#96;(!)&#96;) and is necessary to catch cases where code can diverge
// by storing self referential functions in the heap.
</span><span class="decl-type" id="type_space_hdiv"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_hdiv"><span class="tp">hdiv</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>hdiv: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">P</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="co">H</span>,<span class="co">V</span>,<span class="co">E</span>) <span class="kw op">-></span> </span><span class="co">P</span>

<span class="comment">// The predicate &#96;:ediv&lt;x,a,e&gt;&#96; signifies that if the type &#96;:a&#96; contains a reference to effect constant &#96;:x",
// then the effect &#96;:e&#96; must contain the divergent effect (&#96;:div&#96;). This constraint is generated
// for operations on first-class effects where code can diverge through operations.
</span><span class="decl-type" id="type_space_ediv"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_ediv"><span class="tp">ediv</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ediv: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">V</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">P</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="co">X</span>,<span class="co">V</span>,<span class="co">E</span>) <span class="kw op">-></span> </span><span class="co">P</span>


<span class="comment">// A reference &#96;:ref&lt;h,a&gt;&#96; points to a value of type &#96;:a&#96; in heap &#96;:h&#96;.
</span><span class="decl-type" id="type_space_ref"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_ref"><span class="tp">ref</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="co">H</span>,<span class="co">V</span>) <span class="kw op">-></span> </span><span class="co">V</span>

<span class="comment">// Allocate a fresh reference with an initial value.
</span><span class="decl-extern" id="ref"><span class="kw">pub</span> inline <span class="kw">extern</span> <a class="pp" href="std_core_types.html#ref">ref<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">alloc</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( value <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space_alloc"><span class="tp">alloc</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>alloc: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space_ref"><span class="tp">ref</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c  <span class="st">"kk&#95;ref&#95;alloc"</span>
  cs inline <span class="st">"new Ref&lt;##1,##2&gt;(#1)"</span>
  js inline <span class="st">"{ value: #1 }"</span></span>

<span class="comment">// Assign a new value to a reference.
</span><span class="decl-extern" id="set"><span class="kw">pub</span> inline <span class="kw">extern</span> <a class="pp" href="std_core_types.html#set">set<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>set: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">write</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <span class="op">^</span>ref <span class="tp kw op">:</span> <a class="pp" href="#type_space_ref"><span class="tp">ref</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>, assigned <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space_total"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a><a class="pp" href="#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span> <a class="pp" href="#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  c  <span class="st">"kk&#95;ref&#95;set&#95;borrow"</span>
  cs inline <span class="st">"#1.Set(#2)"</span>
  js inline <span class="st">"((#1).value = #2)"</span></span>

<span class="comment">// Read the value of a reference.
</span><span class="decl-extern" id="ref_fs__excl_"><span class="kw">pub</span> inline <span class="kw">extern</span> <a class="pp" href="std_core_types.html#ref_fs__excl_">ref/(!)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">ref<span class="fslash">/</span></span>(!): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> <span class="tp kw">with</span> <span class="tp">hdiv</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span> <span class="tp tpp">ref</span> <span class="tp kw op">:</span> <a class="pp" href="#type_space_ref"><span class="tp">ref</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><a class="pp" href="#type_space_effect_extend"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>effect<span class="dash">-</span>extend: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> <span class="tp kw">with</span><span class="tp sp">(</span><a class="pp" href="#type_space_hdiv"><span class="tp">hdiv</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>hdiv: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">P</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">)</span>
  c  <span class="st">"kk&#95;ref&#95;get"</span>
  cs inline <span class="st">"#1.Value"</span>
  js inline <span class="st">"#1.value"</span></span>

<span class="comment">// Modify the value of a reference.
// This is especially useful when the reference contains a vector, because
// getting the vector into a local variable and then setting it back into the reference later
// would mean that we hold on to a copy (and we can't update the vector in place then!).
// In contrast, this function passes the ownership to the given function.
</span><span class="decl-extern" id="modify"><span class="kw">pub</span> inline <span class="kw">extern</span> <a class="pp" href="std_core_types.html#modify">modify<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>modify: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h1</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp">local<span class="dash">-</span>var</span><span class="tp sp">&lt;</span><span class="tp tv">h1</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h1</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><span class="tp">write</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">b</span> <span class="tp kw">with</span> <span class="tp">hdiv</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span> <span class="tp tpp">ref</span> <span class="tp kw op">:</span> <a class="pp" href="#type_space_ref"><span class="tp">ref</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space_local_var"><span class="tp">local-var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><a class="pp" href="#type_space_effect_extend"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>effect<span class="dash">-</span>extend: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><a class="pp" href="#type_space_effect_extend"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>effect<span class="dash">-</span>extend: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a> <span class="tp kw">with</span><span class="tp sp">(</span><a class="pp" href="#type_space_hdiv"><span class="tp">hdiv</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>hdiv: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">P</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">)</span>
  c  <span class="st">"kk&#95;ref&#95;modify"</span>
  js inline <span class="st">"((#2)(#1))"</span></span>

<span class="comment">// If a heap effect is unobservable, the heap effect can be erased by using the &#96;run&#96; fun.
// See also: &#95;State in Haskell, by Simon Peyton Jones and John Launchbury&#95;.
</span><span class="decl-fun" id="run"><span class="kw">pub</span> <span class="kw">extern</span> <a class="pp" href="std_core_types.html#run">run<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>run: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">alloc</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><span class="tp">write</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_alloc"><span class="tp">alloc</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>alloc: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space_effect_extend"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>effect<span class="dash">-</span>extend: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">E</span></span></a> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>
  c  inline <span class="st">"(kk&#95;function&#95;call(kk&#95;box&#95;t,(kk&#95;function&#95;t,kk&#95;context&#95;t&#42;),#1,(#1,kk&#95;context()),kk&#95;context()))"</span>
  cs inline <span class="st">"Primitive.Run&lt;##2&gt;(#1)"</span>
  js inline <span class="st">"((#1)())"</span></span>


<span class="comment">// Mask the state effect. This is more convenient than masking each &#96;:read&#96;, &#96;:write&#96;, and &#96;:alloc&#96; effect separately.
</span><span class="decl-extern" id="mask_st"><span class="kw">pub</span> inline <span class="kw">extern</span> <a class="pp" href="std_core_types.html#mask_st">mask-st<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>mask<span class="dash">-</span>st: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">st</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="#type_space_total"><span class="tp"><span class="effect">total</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_st"><span class="tp">st</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>st: <span class="co">H</span> <span class="kw op">-></span> <span class="co">E</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><span class="tp kw op">|</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">)</span>
  inline <span class="st">"#1"</span></span>

<span class="comment">/&#42;
// Inject the local effect into a function effect.
pub inline extern inject-local&lt;a,h,e&gt;( action : () -&gt; e a ) : total (() -&gt; &lt;local&lt;h&gt;|e&gt; a)
  inline "#1"
&#42;/</span>

<span class="comment">// ----------------------------------------------------------------------------
// Local Variables
// ----------------------------------------------------------------------------
</span>
<span class="comment">// A local heap effect.
</span><span class="decl-type" id="type_space_local"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="co">H</span>) <span class="kw op">-></span> </span><span class="co">X</span>

<span class="comment">// A local variable &#96;:local-var&lt;s,a&gt;&#96; points to a value of type &#96;:a&#96; in local scope &#96;:s&#96;.
</span><span class="decl-type" id="type_space_local_var"><span class="kw">pub</span> <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_local_var"><span class="tp">local-var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="co">H</span>,<span class="co">V</span>) <span class="kw op">-></span> </span><span class="co">V</span>

<span class="comment">// Allocate a fresh local with an initial value.
</span><span class="decl-extern" id="local_new"><span class="kw">pub</span> inline <span class="kw">extern</span> <a class="pp" href="std_core_types.html#local_new">local-new<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>new: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">local<span class="dash">-</span>var</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><span class="op">&lt;</span>a,s,e<span class="op">&gt;</span>(value<span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><a class="pp" href="#type_space_effect_extend"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>effect<span class="dash">-</span>extend: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space_local_var"><span class="tp">local-var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c  <span class="st">"kk&#95;ref&#95;alloc"</span>
  cs inline <span class="st">"new Ref&lt;##1,##2&gt;(#1)"</span>
  js inline <span class="st">"{ value: #1 }"</span></span>

<span class="comment">// Assign a new value to a local variable
</span><span class="decl-extern" id="local_set"><span class="kw">pub</span> inline <span class="kw">extern</span> <a class="pp" href="std_core_types.html#local_set">local-set<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>set: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">v</span> <span class="tp kw op">:</span> <span class="tp">local<span class="dash">-</span>var</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a><span class="op">&lt;</span>a,s,e<span class="op">&gt;</span>( <span class="op">^</span>v<span class="tp kw op">:</span> <a class="pp" href="#type_space_local_var"><span class="tp">local-var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>, assigned<span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><a class="pp" href="#type_space_effect_extend"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>effect<span class="dash">-</span>extend: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space_unit"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a><a class="pp" href="#type_space_unit"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unit: <span class="co">V</span></span></a>
  c  <span class="st">"kk&#95;ref&#95;set&#95;borrow"</span>
  cs inline <span class="st">"#1.Set(#2)"</span>;
  js inline <span class="st">"((#1).value = #2)"</span></span>

<span class="comment">// Read the value of a local variable.
</span><span class="decl-extern" id="local_get"><span class="kw">pub</span> inline <span class="kw">extern</span> <a class="pp" href="std_core_types.html#local_get">local-get<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>get: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">v</span> <span class="tp kw op">:</span> <span class="tp">local<span class="dash">-</span>var</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> <span class="tp kw">with</span> <span class="tp">hdiv</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">v</span><span class="tp kw op">:</span> <a class="pp" href="#type_space_local_var"><span class="tp">local-var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><a class="pp" href="#type_space_effect_extend"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>effect<span class="dash">-</span>extend: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> <span class="tp kw">with</span><span class="tp sp">(</span><a class="pp" href="#type_space_hdiv"><span class="tp">hdiv</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>hdiv: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">P</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="co">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">)</span>
  c  <span class="st">"kk&#95;ref&#95;get"</span>
  cs inline <span class="st">"#1.Value"</span>;
  js inline <span class="st">"((#1).value)"</span></span>;

<span class="comment">// &#95;Internal&#95;: if local mutation is unobservable, the &#96;:local&#96; effect can be erased by using the &#96;local-scope&#96; function.
// See also: &#95;State in Haskell, by Simon Peyton Jones and John Launchbury&#95;.
</span><span class="decl-fun" id="local_scope"><span class="kw">pub</span> inline <span class="kw">fun</span> <a class="pp" href="std_core_types.html#local_scope">local-scope<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>scope: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a><span class="op">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a>,<a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="op">&gt;</span>( <a class="pp">action<span class="pc">action: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp op">&gt;|$</span><span class="number">1964</span><span class="op">&gt;</span> <span class="op">$</span><span class="number">1963</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space_effect_extend"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>effect<span class="dash">-</span>extend: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">E</span></span></a> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><a class="pp">)<span class="pc">result: <span class="tp kw op">-></span> <span class="number">1989</span> <span class="number">1988</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>
  <a class="pp" href="#unsafe_no_local_cast">unsafe-no-local-cast<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>no<span class="dash">-</span>local<span class="dash">-</span>cast: <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp op">&gt;|$</span><span class="number">1964</span><span class="op">&gt;</span> <span class="op">$</span><span class="number">1963</span>) <span class="kw op">-></span> <span class="op">$</span><span class="number">1964</span> (() <span class="kw op">-></span> <span class="op">$</span><span class="number">1964</span> <span class="op">$</span><span class="number">1963</span>)</span></a>(<a class="pp">action<span class="pc">action: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp op">&gt;|$</span><span class="number">1964</span><span class="op">&gt;</span> <span class="op">$</span><span class="number">1963</span></span></a>)(</span>)

inline <span class="decl-extern" id="unsafe_no_local_cast"><span class="kw">extern</span> <a class="pp" href="std_core_types.html#unsafe_no_local_cast">unsafe-no-local-cast<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>no<span class="dash">-</span>local<span class="dash">-</span>cast: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="co">H</span></span></a><span class="tp sp">&gt;</span><a class="pp" href="#type_space_effect_extend"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>effect<span class="dash">-</span>extend: <span class="tp sp">(</span><span class="co">X</span>, <span class="co">E</span>) <span class="kw op">-></span> <span class="co">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><a class="pp" href="#type_space_total"><span class="tp"><span class="effect">(</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">)</span>
  inline <span class="st">"#1"</span></span>

<span class="comment">/&#42;
inline extern local-scope : forall&lt;e,a&gt; ( action : forall&lt;h&gt; () -&gt; &lt;local&lt;h&gt; | e&gt; a) -&gt; e a
  c  "(kk&#95;function&#95;call(kk&#95;box&#95;t,(kk&#95;function&#95;t,kk&#95;context&#95;t&#42;),#1,(#1,kk&#95;context())))"
  cs inline "Primitive.Run&lt;##2&gt;(#1)";
  js inline "((#1)())";
&#42;/</span>

<span class="comment">// &#95;Internal&#95;: used to pass locals by reference.
</span><span class="kw">pub</span> inline <span class="kw">extern</span> @byref(loc <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space_total"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a>
  inline <span class="st">"#1"</span>


<span class="comment">// ----------------------------------------------------------------------------
// Used during codegen
// ----------------------------------------------------------------------------
</span>
<span class="comment">// Magic casting to the &#96;:any&#96; type.
</span><span class="kw">pub</span> inline <span class="kw">extern</span> @toany( x <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_any"><span class="tp">any</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>any: <span class="co">V</span></span></a>
  inline <span class="st">"#1"</span>
  cs inline <span class="st">"(object)(#1)"</span>

<span class="comment">// Internal: used for value effects
</span><span class="kw">pub</span> <span class="tp kw">type</span> <span class="tp">@valueop</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="co">E</span></span></a><span class="tp sp">::</span><span class="co">E</span>,<a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">::</span><span class="co">V</span><span class="op">&gt;</span>
  <span class="kw">con</span> <span class="co">@Valueop</span>


<span class="comment">// ----------------------------------------------------------------------------
// Internal types
// ----------------------------------------------------------------------------
</span>
<span class="comment">// &#95;Internal&#95;: Optional is used by the compiler to pass optional arguments.
// It is usually displayed as &#96;: ? tp&#96; for some type &#96;:tp&#96;.
</span><span class="kw">pub</span> value <span class="tp kw">type</span> <span class="tp">@optional</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="comment">// The &#96;Optional&#96; constructor is used when an optional argument is given.
</span>  <span class="kw">con</span> <span class="co">@Optional</span>( value <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a> )
  <span class="comment">// &#96;None&#96; is used when an optional argument is not provided.
</span>  <span class="kw">con</span> <span class="co">@None</span>   <span class="comment">// note: must come second; see Core/Core.hs
</span>

<span class="comment">// ----------------------------------------------------------------------------
// First-class constructor contexts.
// These primitives are used by the compiler for
// &#95;tail recursion module cons&#95; (TRMC) optimization.
// ----------------------------------------------------------------------------
</span>
<span class="kw">extern</span> <span class="kw">import</span>
  c header<span class="dash">-</span>end<span class="dash">-</span>file <span class="st">"inline/types-cctx.h"</span>
  js file <span class="st">"inline/types-cctx.js"</span>

<span class="kw">extern</span> <span class="kw">import</span>
  c file <span class="st">"inline/types-cctx.c"</span>

<span class="comment">// &#95;Internal&#95;. Internal type for constructor contexts.
// Holds the address to a field of type &#96;:a&#96; in a constructor.
</span><span class="kw">pub</span> <span class="tp kw">type</span> <span class="tp">@field<span class="dash">-</span>addr</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>

<span class="comment">// &#95;Internal&#95;. Internal function name for field addresses.
</span><span class="kw">pub</span> fip <span class="kw">extern</span> @field<span class="dash">-</span>addr<span class="dash">-</span>of( <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">1849</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>, <a class="pp">conname<span class="pc">conname: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a>, <a class="pp">fieldname<span class="pc">fieldname: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_total"><span class="tp"><span class="effect">@field-addr</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c inline <span class="st">"kk&#95;field&#95;addr&#95;null()"</span>
  inline <span class="st">""</span>  <span class="comment">// compiled specially
</span>
<span class="comment">// First-class constructor context (for &#95;tail recursion modulo cons&#95; (TRMC) optimization).
// See also &#96;&#96;samples/syntax/contexts&#96;&#96; for further examples.
</span><span class="decl-type" id="type_space_cctx"><span class="kw">abstract</span> value <span class="tp kw">type</span> <a class="pp" href="std_core_types.html#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="kw">con</span> <span class="co">@Cctx</span>( <a class="pp" href="std_core_types.html#cctx_fs_res">res<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">cctx<span class="fslash">/</span></span>res: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">cctx</span> <span class="tp kw op">:</span> <span class="tp">cctx</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>, <a class="pp" href="std_core_types.html#cctx_fs_holeptr">holeptr<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">cctx<span class="fslash">/</span></span>holeptr: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">cctx</span> <span class="tp kw op">:</span> <span class="tp">cctx</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">@field<span class="dash">-</span>addr</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <span class="tp">@field<span class="dash">-</span>addr</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> </span>)

<span class="comment">// A first-class constructor context where the hole is of the same type as the root of the structure.
</span><span class="decl-alias" id="type_space_ctx"><span class="kw">pub</span> <span class="tp kw">alias</span> <a class="pp" href="std_core_types.html#type_space_ctx"><span class="tp">ctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ctx: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="op">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="op">&gt;</span> <span class="kw">=</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="op">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>,<a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a></span><span class="op">&gt;</span>

<span class="comment">// &#95;Internal&#95;. Create a hole for a context
</span><span class="kw">pub</span> inline fip <span class="kw">extern</span> @cctx<span class="dash">-</span>hole<span class="dash">-</span>create() <span class="tp kw op">:</span> <a class="pp" href="#type_space_total"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a>
  c  inline <span class="st">"kk&#95;cctx&#95;hole()"</span>
  js inline <span class="st">"undefined"</span>

<span class="comment">// &#95;Internal&#95;. Create an initial non-empty context.
</span><span class="kw">pub</span> inline fip <span class="kw">extern</span> @cctx<span class="dash">-</span>create( x <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a>, xhole <span class="tp kw op">:</span> <span class="tp">@field<span class="dash">-</span>addr</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c   <span class="st">"kk&#95;cctx&#95;create"</span>
  js  <span class="st">"$std&#95;core&#95;types.&#95;cctx&#95;create"</span>

<span class="comment">// &#95;Internal&#95;. Extend a constructor context with a guaranteed non-empty context
</span><span class="kw">pub</span> inline fip <span class="kw">extern</span> @cctx<span class="dash">-</span>extend( c <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>, x <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a>, xhole <span class="tp kw op">:</span> <span class="tp">@field<span class="dash">-</span>addr</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c inline <span class="st">"kk&#95;cctx&#95;extend(#1,#2,#3,kk&#95;context())"</span>
  js <span class="st">"$std&#95;core&#95;types.&#95;cctx&#95;extend"</span>

<span class="comment">// &#95;Internal&#95;. Compose a constructor context with a guaranteed non-empty context
</span><span class="kw">pub</span> inline fip <span class="kw">extern</span> @cctx<span class="dash">-</span>compose<span class="dash">-</span>extend( c1 <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>, c2 <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c inline <span class="st">"kk&#95;cctx&#95;extend(#1,#2.res,#2.holeptr,kk&#95;context())"</span>
  js <span class="st">"$std&#95;core&#95;types.&#95;cctx&#95;compose"</span>

<span class="comment">// Apply a constructor context to its final value (of type &#96;:b&#96;), which is
// put into the hole of the context, and returns the root of the resulting structure &#96;:a&#96;.
// This is a constant time operation for unique contexts.
//
// &#96;(ctx Cons(1,&#95;)) ++ (ctx Cons(&#95;,Nil)) ++. 3 == [1,3]&#96;
</span><span class="decl-extern" id="cctx_fs__plus__plus__dot_"><span class="kw">pub</span> inline fip <span class="kw">extern</span> <a class="pp" href="std_core_types.html#cctx_fs__plus__plus__dot_">cctx/(++.)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">cctx<span class="fslash">/</span></span>(++.): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">cctx</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>( c <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>, x <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_total"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>total: <span class="co">E</span></span></a>
  c inline <span class="st">"kk&#95;cctx&#95;apply(#1,#2,kk&#95;context())"</span>
  js <span class="st">"$std&#95;core&#95;types.&#95;cctx&#95;apply"</span></span>

<span class="comment">// Compose two constructor contexts.
// This is a constant time operation for unique contexts.
//
// &#96;(ctx Cons(1,&#95;)) ++ (ctx Cons(2,&#95;)) ++. Nil == [1,2]&#96;
</span><span class="decl-extern" id="cctx_fs__plus__plus_"><span class="kw">pub</span> inline fip <span class="kw">extern</span> <a class="pp" href="std_core_types.html#cctx_fs__plus__plus_">cctx/(++)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">cctx<span class="fslash">/</span></span>(++): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">c1</span> <span class="tp kw op">:</span> <span class="tp">cctx</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">c2</span> <span class="tp kw op">:</span> <span class="tp">cctx</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">cctx</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">&gt;</span></span></a>( c1 <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>, c2 <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="co">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c inline <span class="st">"kk&#95;cctx&#95;compose(#1,#2,kk&#95;context())"</span>
  js <span class="st">"$std&#95;core&#95;types.&#95;cctx&#95;compose"</span></span>

<span class="comment">// Create an empty context. Usually written directly as an empty context &#96;ctx &#95;&#96;.
</span><span class="decl-extern" id="cctx_fs_empty"><span class="kw">pub</span> inline fip <span class="kw">extern</span> <a class="pp" href="std_core_types.html#cctx_fs_empty">cctx/empty<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span><span class="lq">cctx<span class="fslash">/</span></span>empty: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">cctx</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_cctx"><span class="tp">cctx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>cctx: <span class="tp sp">(</span><span class="co">V</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  c  <span class="st">"kk&#95;cctx&#95;empty"</span>
  js <span class="st">"$std&#95;core&#95;types.&#95;cctx&#95;empty"</span></span>


</pre>

</body>
</html>
