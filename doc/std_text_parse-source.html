<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=1.0" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>parse.kk documentation</title>
</head>

<body class="koka doc body madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2020, Daan Leijen Microsoft Corporation.
 
  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the file "license.txt" at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Parser combinators
&#42;/</span>  
<span class="kw">public</span> <span class="kw">module</span> parse

<span class="decl-alias" id="type_space_parser"><span class="tp kw">alias</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#type_space_parser"><span class="tp">parser</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parser: <span class="tp sp">(</span><span class="tp">E</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp kw">=</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> </span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>

<span class="decl-type" id="type_space_parse"><span class="tp kw">effect</span> <span class="decl-con" id="con_space_Parse"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a></span></span> {
  <span class="kw">fun</span> <span class="decl-fun" id="satisfy"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#satisfy">satisfy<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>satisfy: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a></span>( <a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp op">$</span><span class="number">493</span>, sslice)<span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_total"><span class="tp"><span class="effect">total</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>total: <span class="tp">E</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>
  <span class="kw">control</span> <span class="decl-fun" id="fail"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#fail">fail<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>fail: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp tv">a</span></span></a></span>(<a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>
  <span class="kw">control</span> <span class="decl-fun" id="pick"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#pick">pick<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>pick: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">bool</span></span></a></span>() <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a>
  <span class="kw">fun</span> <span class="decl-fun" id="current_input"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#current_input">current-input<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>current<span class="dash">-</span>input: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">sslice</span></span></a></span>() <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a>
}

<span class="decl-fun" id="starts_with"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#starts_with">starts-with<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>starts<span class="dash">-</span>with: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">p<span class="pc">p: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp op">$</span><span class="number">2452</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> )  <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <span class="kw">match</span> (<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#slice">slice<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>slice: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="#parse">parse<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">input0</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp op">$</span><span class="number">2452</span></span></a>)) {
    <a class="pp" href="#con_space_ParseOk"><span class="co">ParseOk</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseOk: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">2452</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a>) <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">2452</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>)
    &#95;               <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
  }
</span>}


<span class="decl-type" id="type_space_parse_error"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#type_space_parse_error"><span class="tp">parse-error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse<span class="dash">-</span>error: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <span class="decl-con" id="con_space_ParseOk"><a class="pp" href="#con_space_ParseOk"><span class="co">ParseOk</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseOk: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">result<span class="pc">result: <span class="number">39</span></span></a><span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>, <span class="decl-fun" id="rest"><a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a></span> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a> </span>)
  <span class="decl-con" id="con_space_ParseError"><a class="pp" href="#con_space_ParseError"><span class="co">ParseError</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseError: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a> </span>)
</span>}

<span class="decl-fun" id="maybe"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#maybe">maybe<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>maybe: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">perr</span> <span class="tp kw op">:</span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">perr<span class="pc">perr: <span class="tp">parse<span class="dash">-</span>error</span><span class="tp op">&lt;$</span><span class="number">1303</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse_error"><span class="tp">parse-error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse<span class="dash">-</span>error: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp">perr<span class="pc">perr: <span class="tp">parse<span class="dash">-</span>error</span><span class="tp op">&lt;$</span><span class="number">1303</span><span class="op">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="#either">either<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>either: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">perr</span> <span class="tp kw op">:</span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#maybe_2">maybe<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>maybe<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>
</span>}

<span class="decl-fun" id="either"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#either">either<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>either: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">perr</span> <span class="tp kw op">:</span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">perr<span class="pc">perr: <span class="tp">parse<span class="dash">-</span>error</span><span class="tp op">&lt;$</span><span class="number">441</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse_error"><span class="tp">parse-error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse<span class="dash">-</span>error: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_either"><span class="tp">either</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>either: <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {  
  <span class="kw">match</span>(<a class="pp">perr<span class="pc">perr: <span class="tp">parse<span class="dash">-</span>error</span><span class="tp op">&lt;$</span><span class="number">441</span><span class="op">&gt;</span></span></a>) {
    <a class="pp" href="#con_space_ParseOk"><span class="co">ParseOk</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseOk: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">441</span></span></a>,&#95;) <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Right"><span class="co">Right</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Right: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">right</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">441</span></span></a>)
    <a class="pp" href="#con_space_ParseError"><span class="co">ParseError</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseError: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a>,&#95;) <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Left"><span class="co">Left</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Left: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">left</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a>)
  }
</span>}

<span class="decl-fun" id="parse_eof"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#parse_eof">parse-eof<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse<span class="dash">-</span>eof: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">input</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">input<span class="pc">input: <span class="tp">sslice</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a>, <a class="pp">p<span class="pc">p: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp op">|$</span><span class="number">2285</span><span class="op">&gt;</span> <span class="op">$</span><span class="number">2284</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a> <a class="pp" href="#type_space_parse_error"><span class="tp">parse-error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse<span class="dash">-</span>error: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp" href="#parse">parse<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">input0</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">input<span class="pc">input: <span class="tp">sslice</span></span></a>) {
    <span class="kw">val</span> <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">2284</span></span></a> <span class="kw">=</span> <a class="pp">p<span class="pc">p: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp op">|$</span><span class="number">2285</span><span class="op">&gt;</span> <span class="op">$</span><span class="number">2284</span></span></a>()
    <a class="pp" href="#eof">eof<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>eof: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>()
    <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">2284</span></span></a>
  }
</span>}

<span class="decl-fun" id="parse"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#parse">parse<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">input0</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">input0<span class="pc">input0: <span class="tp">sslice</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a>, <a class="pp">p<span class="pc">p: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp op">|$</span><span class="number">1836</span><span class="op">&gt;</span> <span class="op">$</span><span class="number">1835</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a> <a class="pp" href="#type_space_parse_error"><span class="tp">parse-error</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse<span class="dash">-</span>error: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_hnd-source.html#local_var"><span class="kw">var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">init</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tpp">l</span> <span class="tp kw op">:</span> <span class="tp">local<span class="dash">-</span>var</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">b</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#local_scope">input<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>scope: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a> <span class="kw op">:=</span> <a class="pp">input0<span class="pc">input0: <span class="tp">sslice</span></span></a>
  <a class="pp"><span class="kw">with</span><span class="pc">handler: <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp sp">,</span><span class="tp">local</span><span class="tp op">&lt;$</span><span class="number">1840</span><span class="op">&gt;</span>,local<span class="op">&lt;</span>&#95;253<span class="op">&gt;|$</span><span class="number">1836</span><span class="op">&gt;</span> <span class="op">$</span><span class="number">1835</span>) <span class="kw op">-></span> <span class="op">&lt;</span>local<span class="op">&lt;$</span><span class="number">1840</span><span class="op">&gt;</span>,local<span class="op">&lt;</span>&#95;253<span class="op">&gt;|$</span><span class="number">1836</span><span class="op">&gt;</span> parse<span class="dash">-</span>error<span class="op">&lt;$</span><span class="number">1835</span><span class="op">&gt;</span></span></a> {
    <span class="kw">return</span> <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">1835</span></span></a>            { <a class="pp" href="#con_space_ParseOk"><span class="co">ParseOk</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseOk: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">1835</span></span></a>,<a class="pp">input<span class="pc">input: <span class="tp">sslice</span></span></a>) }
    <span class="kw">fun</span> <a class="pp">current-input<span class="pc">current<span class="dash">-</span>input: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp op">&lt;$</span><span class="number">1840</span><span class="op">&gt;</span>,local<span class="op">&lt;</span>&#95;253<span class="op">&gt;|$</span><span class="number">1836</span><span class="op">&gt;</span> sslice</span></a>() { <a class="pp">input<span class="pc">input: <span class="tp">sslice</span></span></a> }
    <span class="kw">control</span> <a class="pp">fail<span class="pc">fail: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">resume</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">&#95;1868</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp op">&lt;$</span><span class="number">1840</span><span class="op">&gt;</span>,local<span class="op">&lt;</span>&#95;253<span class="op">&gt;|$</span><span class="number">1836</span><span class="op">&gt;</span> parse<span class="dash">-</span>error<span class="op">&lt;$</span><span class="number">1835</span><span class="op">&gt;</span>) <span class="kw op">-></span> <span class="op">&lt;</span>local<span class="op">&lt;$</span><span class="number">1840</span><span class="op">&gt;</span>,local<span class="op">&lt;</span>&#95;253<span class="op">&gt;|$</span><span class="number">1836</span><span class="op">&gt;</span> parse<span class="dash">-</span>error<span class="op">&lt;$</span><span class="number">1835</span><span class="op">&gt;</span></span></a>(<a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a>)   { <a class="pp" href="#con_space_ParseError"><span class="co">ParseError</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseError: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a>,<a class="pp">input<span class="pc">input: <span class="tp">sslice</span></span></a>) }
    <span class="kw">fun</span> <a class="pp">satisfy<span class="pc">satisfy: <span class="tp sp">(</span><span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">&#95;1875</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp op">&lt;$</span><span class="number">1840</span><span class="op">&gt;</span><span class="kw op">|</span>&#95;2000<span class="op">&gt;</span> maybe<span class="op">&lt;</span>&#95;1875<span class="op">&gt;</span></span></a>(<a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">&#95;1875</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>) {
      <span class="kw">val</span> <a class="pp">inp<span class="pc">inp: <span class="tp">sslice</span></span></a> <span class="kw">=</span> <a class="pp">input<span class="pc">input: <span class="tp">sslice</span></span></a>
      <span class="kw">val</span> <a class="pp">m<span class="pc">m: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">&#95;1875</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <span class="kw">fn</span>() <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_total"><span class="tp"><span class="effect">total</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>total: <span class="tp">E</span></span></a> <a class="pp"><span class="tp tv">&#95;</span><span class="pc">&#95;w<span class="dash">-</span>l62<span class="dash">-</span>c28: <span class="tp">V</span></span></a> { <a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">&#95;1875</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">inp<span class="pc">inp: <span class="tp">sslice</span></span></a>) }
      <span class="kw">match</span>(<a class="pp">m<span class="pc">m: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">&#95;1875</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>()) {
        <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">x<span class="pc">x: <span class="tp tv">&#95;1875</span></span></a>,<a class="pp">cap<span class="pc">cap: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>) { <a class="pp">input<span class="pc">input: <span class="tp">local<span class="dash">-</span>var</span><span class="tp op">&lt;$</span><span class="number">1840</span>,sslice<span class="op">&gt;</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#local_set"><span class="kw">:=</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>set: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">v</span> <span class="tp kw op">:</span> <span class="tp">local<span class="dash">-</span>var</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <a class="pp">cap<span class="pc">cap: <span class="tp">sslice</span></span></a>; <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp tv">&#95;1875</span></span></a>) }
        <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>       { <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> }
      }
    }
    <span class="kw">control</span> <a class="pp">pick<span class="pc">pick: <span class="tp sp">(</span><span class="tp tpp">resume</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp op">&lt;$</span><span class="number">1840</span><span class="op">&gt;</span>,local<span class="op">&lt;</span>&#95;253<span class="op">&gt;|$</span><span class="number">1836</span><span class="op">&gt;</span> parse<span class="dash">-</span>error<span class="op">&lt;$</span><span class="number">1835</span><span class="op">&gt;</span>) <span class="kw op">-></span> <span class="op">&lt;</span>local<span class="op">&lt;$</span><span class="number">1840</span><span class="op">&gt;</span>,local<span class="op">&lt;</span>&#95;253<span class="op">&gt;|$</span><span class="number">1836</span><span class="op">&gt;</span> parse<span class="dash">-</span>error<span class="op">&lt;$</span><span class="number">1835</span><span class="op">&gt;</span></span></a>() {
      <span class="kw">val</span> <a class="pp">save<span class="pc">save: <span class="tp">sslice</span></span></a> <span class="kw">=</span> <a class="pp">input<span class="pc">input: <span class="tp">sslice</span></span></a>;
      <span class="kw">match</span>(<a class="pp">resume<span class="pc">resume: <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp op">&lt;$</span><span class="number">1840</span><span class="op">&gt;</span>,local<span class="op">&lt;</span>&#95;253<span class="op">&gt;|$</span><span class="number">1836</span><span class="op">&gt;</span> parse<span class="dash">-</span>error<span class="op">&lt;$</span><span class="number">1835</span><span class="op">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a>)) {
        <a class="pp" href="#con_space_ParseOk"><span class="co">ParseOk</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseOk: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x1<span class="pc">x1: <span class="tp op">$</span><span class="number">1835</span></span></a>,<a class="pp">rest1<span class="pc">rest1: <span class="tp">sslice</span></span></a>) { <a class="pp" href="#con_space_ParseOk"><span class="co">ParseOk</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseOk: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x1<span class="pc">x1: <span class="tp op">$</span><span class="number">1835</span></span></a>,<a class="pp">rest1<span class="pc">rest1: <span class="tp">sslice</span></span></a>) }
        <a class="pp">err1<span class="pc">err1: <span class="tp">parse<span class="dash">-</span>error</span><span class="tp op">&lt;$</span><span class="number">1835</span><span class="op">&gt;</span></span></a> <span class="kw op">-></span> {
          <a class="pp">input<span class="pc">input: <span class="tp">local<span class="dash">-</span>var</span><span class="tp op">&lt;$</span><span class="number">1840</span>,sslice<span class="op">&gt;</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#local_set"><span class="kw">:=</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>set: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">v</span> <span class="tp kw op">:</span> <span class="tp">local<span class="dash">-</span>var</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <a class="pp">save<span class="pc">save: <span class="tp">sslice</span></span></a>
          <span class="kw">match</span>(<a class="pp">resume<span class="pc">resume: <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp op">&lt;$</span><span class="number">1840</span><span class="op">&gt;</span>,local<span class="op">&lt;</span>&#95;253<span class="op">&gt;|$</span><span class="number">1836</span><span class="op">&gt;</span> parse<span class="dash">-</span>error<span class="op">&lt;$</span><span class="number">1835</span><span class="op">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a>)) {  <span class="comment">// todo: limit lookahead?
</span>            <a class="pp" href="#con_space_ParseOk"><span class="co">ParseOk</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseOk: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x2<span class="pc">x2: <span class="tp op">$</span><span class="number">1835</span></span></a>,<a class="pp">rest2<span class="pc">rest2: <span class="tp">sslice</span></span></a>) { <a class="pp" href="#con_space_ParseOk"><span class="co">ParseOk</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>ParseOk: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">result</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">rest</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse<span class="dash">-</span>error</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x2<span class="pc">x2: <span class="tp op">$</span><span class="number">1835</span></span></a>,<a class="pp">rest2<span class="pc">rest2: <span class="tp">sslice</span></span></a>) }
            &#95;err2 <span class="kw op">-></span> <a class="pp">err1<span class="pc">err1: <span class="tp">parse<span class="dash">-</span>error</span><span class="tp op">&lt;$</span><span class="number">1835</span><span class="op">&gt;</span></span></a>  <span class="comment">// todo: merge or pick closest?
</span>          }
        }
      }
    }    
  }  
  <a class="pp"><span class="tp">mask</span><span class="pc">&#95;1: <span class="tp">H</span></span></a><span class="op">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="op">&gt;</span>(<a class="pp">p<span class="pc">p: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp op">|$</span><span class="number">1836</span><span class="op">&gt;</span> <span class="op">$</span><span class="number">1835</span></span></a>)
</span>}


<span class="decl-fun" id="_bar__bar_"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#_bar__bar_">(||)<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>(||): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">p1</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">p2</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>( <a class="pp">p1<span class="pc">p1: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1015</span>,<span class="op">$</span><span class="number">1014</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_parser"><span class="tp">parser</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parser: <span class="tp sp">(</span><span class="tp">E</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <a class="pp">p2<span class="pc">p2: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1015</span>,<span class="op">$</span><span class="number">1014</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_parser"><span class="tp">parser</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parser: <span class="tp sp">(</span><span class="tp">E</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="#pick">pick<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>pick: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">bool</span></span></a>()) <span class="kw">then</span> <a class="pp">p1<span class="pc">p1: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1015</span>,<span class="op">$</span><span class="number">1014</span><span class="op">&gt;</span></span></a>() <span class="kw">else</span> <a class="pp">p2<span class="pc">p2: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1015</span>,<span class="op">$</span><span class="number">1014</span><span class="op">&gt;</span></span></a>()
</span>}

<span class="decl-fun" id="optional"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#optional">optional<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>optional: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>( <a class="pp">default<span class="pc">default: <span class="tp op">$</span><span class="number">1034</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>, <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1035</span>,<span class="op">$</span><span class="number">1034</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_parser"><span class="tp">parser</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parser: <span class="tp sp">(</span><span class="tp">E</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> {
  (<a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1035</span>,<span class="op">$</span><span class="number">1034</span><span class="op">&gt;</span></span></a> <a class="pp" href="#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>(||): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">p1</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">p2</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a> ({ <a class="pp">default<span class="pc">default: <span class="tp op">$</span><span class="number">1034</span></span></a> }))
</span>}

<span class="decl-fun" id="choose"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#choose">choose<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>choose: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ps</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>( <a class="pp">ps<span class="pc">ps: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">769</span>,<span class="op">$</span><span class="number">768</span><span class="op">&gt;</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_parser"><span class="tp">parser</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parser: <span class="tp sp">(</span><span class="tp">E</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> {
  <span class="kw">match</span>(<a class="pp">ps<span class="pc">ps: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">769</span>,<span class="op">$</span><span class="number">768</span><span class="op">&gt;</span><span class="op">&gt;</span></span></a>) {
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="#fail">fail<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>fail: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp tv">a</span></span></a>(<span class="st">"no further alternatives"</span>)
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">769</span>,<span class="op">$</span><span class="number">768</span><span class="op">&gt;</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>) <span class="kw op">-></span> <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">769</span>,<span class="op">$</span><span class="number">768</span><span class="op">&gt;</span></span></a>()
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">769</span>,<span class="op">$</span><span class="number">768</span><span class="op">&gt;</span></span></a>,<a class="pp">pp<span class="pc">pp: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">769</span>,<span class="op">$</span><span class="number">768</span><span class="op">&gt;</span><span class="op">&gt;</span></span></a>)  <span class="kw op">-></span> <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="#pick">pick<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>pick: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">bool</span></span></a>()) <span class="kw">then</span> <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">769</span>,<span class="op">$</span><span class="number">768</span><span class="op">&gt;</span></span></a>() <span class="kw">else</span> <a class="pp" href="#choose">choose<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>choose: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ps</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>(<a class="pp">pp<span class="pc">pp: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">769</span>,<span class="op">$</span><span class="number">768</span><span class="op">&gt;</span><span class="op">&gt;</span></span></a>)
  }
</span>}

<span class="decl-fun" id="satisfy_fail"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#satisfy_fail">satisfy-fail<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>satisfy<span class="dash">-</span>fail: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp tv">a</span></span></a>( <a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp op">$</span><span class="number">522</span>, sslice)<span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> {
  <span class="kw">match</span>(<a class="pp" href="#satisfy">satisfy<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>satisfy: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp op">$</span><span class="number">522</span>, sslice)<span class="op">&gt;</span></span></a>)) {
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="#fail">fail<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>fail: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp tv">a</span></span></a>(<a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a>)
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">522</span></span></a>) <span class="kw op">-></span> <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">522</span></span></a>
  }
</span>}

<span class="decl-fun" id="eof"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#eof">eof<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>eof: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> {
  <span class="kw">match</span>(<a class="pp" href="#satisfy">satisfy<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>satisfy: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<span class="kw">fn</span>(<a class="pp">s<span class="pc">s: <span class="tp">sslice</span></span></a>){ <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">s<span class="pc">s: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_empty_1">is-empty<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>empty<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a>,<a class="pp">s<span class="pc">s: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>) <span class="kw">else</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> })) {
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="#fail">fail<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>fail: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp tv">a</span></span></a>(<span class="st">"expecting end-of-input"</span>)
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>    <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a>
  }
</span>}


<span class="decl-fun" id="char_is"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#char_is">char-is<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char<span class="dash">-</span>is: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>( <a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a> <span class="tp kw op">:</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> {
  <a class="pp" href="#satisfy_fail">satisfy-fail<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>satisfy<span class="dash">-</span>fail: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp tv">a</span></span></a>(<a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a>) <span class="kw">fn</span>(<a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a>) {
    <span class="kw">match</span>(<a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#next">next<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>next: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>) {
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>) <span class="kw op">|</span> <a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>) <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>)
      &#95; <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
    } 
  }
</span>}

<span class="decl-fun" id="next_while0"><span class="kw">private</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#next_while0">next-while0<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>next<span class="dash">-</span>while0: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">acc</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span></span></a>( <a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a>, <a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a>, <a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lp__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> {
  <span class="kw">match</span>(<a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#next">next<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>next: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>) {
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>) <span class="kw op">|</span> <a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>) <span class="kw op">-></span> <a class="pp" href="#next_while0">next-while0<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>next<span class="dash">-</span>while0: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">acc</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#unsafe_decreasing">unsafe-decreasing<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>decreasing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a>), <a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>,<a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>) )
    &#95; <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#reverse">reverse<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>reverse: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>
  }
</span>}


<span class="decl-fun" id="chars_are"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#chars_are">chars-are<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>chars<span class="dash">-</span>are: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a> <span class="tp kw op">:</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp" href="#satisfy_fail">satisfy-fail<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>satisfy<span class="dash">-</span>fail: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp tv">a</span></span></a>(<a class="pp">msg<span class="pc">msg: <span class="tp">string</span></span></a>) <span class="kw">fn</span>(<a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a>) { 
    <span class="kw">match</span>( <a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="#next_while0">next-while0<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>next<span class="dash">-</span>while0: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">acc</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span></span></a>(<a class="pp">pred<span class="pc">pred: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>) ) {
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>,&#95;<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>)
    }
  }  
</span>}

<span class="decl-fun" id="next_match"><span class="kw">private</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#next_match">next-match<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>next<span class="dash">-</span>match: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">cs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a>, <a class="pp">cs<span class="pc">cs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_sslice"><span class="tp">sslice</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sslice: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <span class="kw">match</span>(<a class="pp">cs<span class="pc">cs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>) {
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a>)
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>,<a class="pp">cc<span class="pc">cc: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>) <span class="kw op">-></span> <span class="kw">match</span> (<a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#next">next<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>next: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>) {
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>) <span class="kw op">|</span> <a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">,</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a> <span class="kw op">-></span> <a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="#next_match">next-match<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>next<span class="dash">-</span>match: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">cs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">cc<span class="pc">cc: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a> )
      &#95; <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
    }
  }
</span>}

<span class="decl-fun" id="pstring"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#pstring">pstring<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>pstring: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp" href="#satisfy_fail">satisfy-fail<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>satisfy<span class="dash">-</span>fail: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp">sslice</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp tv">a</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>) <span class="kw">fn</span>(<a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a>) {
    <span class="kw">match</span> (<a class="pp">slice<span class="pc">slice: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="#next_match">next-match<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>next<span class="dash">-</span>match: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">,</span> <span class="tp tpp">cs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">sslice</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#list_4">list<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>)) {
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a>) <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">sslice</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>)
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>    <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
    }
  }  
</span>}

<span class="decl-fun" id="char"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#char">char<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>( <a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> {
  <a class="pp" href="#char_is">char-is<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char<span class="dash">-</span>is: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>( <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show_2">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>), <span class="kw">fn</span>(<a class="pp">c0<span class="pc">c0: <span class="tp">char</span></span></a>){ <a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">,</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">c0<span class="pc">c0: <span class="tp">char</span></span></a> } )
</span>}

<span class="decl-fun" id="no_digit"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#no_digit">no-digit<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>no<span class="dash">-</span>digit: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> {
  <a class="pp" href="#char_is">char-is<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char<span class="dash">-</span>is: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<span class="st">"not a digit"</span>, <span class="kw">fn</span>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>){ <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_excl_">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(!): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_digit">is-digit<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>digit: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> })
</span>}

<span class="decl-fun" id="digit"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#digit">digit<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>digit: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">int</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a> <span class="kw">=</span> <a class="pp" href="#char_is">char-is<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char<span class="dash">-</span>is: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<span class="st">"digit"</span>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_digit">is-digit<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>digit: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
  (<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash__4">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">char</span></span></a> <span class="st">'0'</span>)<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="decl-fun" id="alpha"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#alpha">alpha<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>alpha: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> {
  <a class="pp" href="#char_is">char-is<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char<span class="dash">-</span>is: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<span class="st">"alpha"</span>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_alpha">is-alpha<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>alpha: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
</span>}

<span class="decl-fun" id="alpha_num"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#alpha_num">alpha-num<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>alpha<span class="dash">-</span>num: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> {
  <a class="pp" href="#char_is">char-is<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char<span class="dash">-</span>is: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<span class="st">"alpha-num"</span>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_alpha_num">is-alpha-num<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>alpha<span class="dash">-</span>num: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
</span>}

<span class="decl-fun" id="white"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#white">white<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>white: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> {
  <a class="pp" href="#char_is">char-is<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char<span class="dash">-</span>is: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<span class="st">""</span>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_white">is-white<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>white: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
</span>}

<span class="decl-fun" id="whitespace"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#whitespace">whitespace<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>whitespace: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp" href="#chars_are">chars-are<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>chars<span class="dash">-</span>are: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>(<span class="st">""</span>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_white">is-white<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>white: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#string_2">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">cs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a>  
</span>}

<span class="decl-fun" id="whitespace0"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#whitespace0">whitespace0<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>whitespace0: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp" href="#optional">optional<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>optional: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>(<span class="st">""</span>, <a class="pp" href="#whitespace">whitespace<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>whitespace: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>)
</span>}

<span class="decl-fun" id="digits"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#digits">digits<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>digits: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp" href="#chars_are">chars-are<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>chars<span class="dash">-</span>are: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>(<span class="st">"digit"</span>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_digit">is-digit<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>digit: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> )<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#string_2">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">cs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a>
</span>}

<span class="decl-fun" id="digits0"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#digits0">digits0<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>digits0: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp" href="#optional">optional<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>optional: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>(<span class="st">"0"</span>, <a class="pp" href="#digits">digits<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>digits: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>)
</span>}

<span class="decl-fun" id="sign"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#sign">sign<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>sign: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">bool</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a> <span class="kw">=</span> <a class="pp" href="#one_of_or">one-of-or<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>one<span class="dash">-</span>of<span class="dash">-</span>or: <span class="tp sp">(</span><span class="tp tpp">chars</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<span class="st">"+-"</span>, <span class="st">'+'</span>)
  (<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">,</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="st">'-'</span>)
</span>}

<span class="decl-fun" id="pnat"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#pnat">pnat<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>pnat: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">int</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp" href="#digits">digits<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>digits: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>()<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#parse_int_default">parse-int-default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>parse<span class="dash">-</span>int<span class="dash">-</span>default: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hex</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<span class="number">0</span>)
</span>}

<span class="decl-fun" id="pint"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#pint">pint<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>pint: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">int</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">neg<span class="pc">neg: <span class="tp">bool</span></span></a> <span class="kw">=</span> <a class="pp" href="#sign">sign<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>sign: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">bool</span></span></a>()
  <span class="kw">val</span> <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp" href="#pnat">pnat<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>pnat: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">int</span></span></a>()
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">neg<span class="pc">neg: <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="kw">else</span> <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>
</span>}


<span class="decl-fun" id="none_of"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#none_of">none-of<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>none<span class="dash">-</span>of: <span class="tp sp">(</span><span class="tp tpp">chars</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>( <a class="pp">chars<span class="pc">chars: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> {
  <a class="pp" href="#char_is">char-is<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char<span class="dash">-</span>is: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<span class="st">""</span>, <span class="kw">fn</span>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>){ <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_excl_">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(!): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">chars<span class="pc">chars: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#contains">contains<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>contains: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sub</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)  })
</span>}

<span class="decl-fun" id="none_of_many1"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#none_of_many1">none-of-many1<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>none<span class="dash">-</span>of<span class="dash">-</span>many1: <span class="tp sp">(</span><span class="tp tpp">chars</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>( <a class="pp">chars<span class="pc">chars: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp" href="#chars_are">chars-are<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>chars<span class="dash">-</span>are: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>(<span class="st">""</span>, <span class="kw">fn</span>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>){ <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#_excl_">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(!): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">chars<span class="pc">chars: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#contains">contains<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>contains: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sub</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)  })<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#string_2">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">cs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a>
</span>}

<span class="decl-fun" id="one_of"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#one_of">one-of<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>one<span class="dash">-</span>of: <span class="tp sp">(</span><span class="tp tpp">chars</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>( <a class="pp">chars<span class="pc">chars: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> {
  <a class="pp" href="#char_is">char-is<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>char<span class="dash">-</span>is: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<a class="pp">chars<span class="pc">chars: <span class="tp">string</span></span></a>, <span class="kw">fn</span>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a>){ <a class="pp">chars<span class="pc">chars: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#contains">contains<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>contains: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sub</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">c<span class="pc">c: <span class="tp">char</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)  })
  <span class="comment">// chars.list.map(fn(c){ (fn(){ char(c) } ) }).choose
</span></span>}

<span class="decl-fun" id="many_acc"><span class="kw">private</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#many_acc">many-acc<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>many<span class="dash">-</span>acc: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">acc</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1183</span>,<span class="op">$</span><span class="number">1182</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_parser"><span class="tp">parser</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parser: <span class="tp sp">(</span><span class="tp">E</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp op">&lt;$</span><span class="number">1182</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  ({ <span class="kw">val</span> <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">1182</span></span></a> <span class="kw">=</span> <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1183</span>,<span class="op">$</span><span class="number">1182</span><span class="op">&gt;</span></span></a>(); <a class="pp" href="#many_acc">many-acc<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>many<span class="dash">-</span>acc: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">acc</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#unsafe_decreasing">unsafe-decreasing<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>decreasing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1183</span>,<span class="op">$</span><span class="number">1182</span><span class="op">&gt;</span></span></a>),<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">1182</span></span></a>,<a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp op">&lt;$</span><span class="number">1182</span><span class="op">&gt;</span></span></a>)) }) <a class="pp" href="#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>(||): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">p1</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">p2</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a> ({ <a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp op">&lt;$</span><span class="number">1182</span><span class="op">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#reverse">reverse<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>reverse: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> })
</span>}

<span class="decl-fun" id="many"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#many">many<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>many: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1267</span>,<span class="op">$</span><span class="number">1266</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_parser"><span class="tp">parser</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parser: <span class="tp sp">(</span><span class="tp">E</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp" href="#many_acc">many-acc<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>many<span class="dash">-</span>acc: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">acc</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1267</span>,<span class="op">$</span><span class="number">1266</span><span class="op">&gt;</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>)
</span>}

<span class="decl-fun" id="many1"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#many1">many1<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>many1: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1283</span>,<span class="op">$</span><span class="number">1282</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_parser"><span class="tp">parser</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parser: <span class="tp sp">(</span><span class="tp">E</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1283</span>,<span class="op">$</span><span class="number">1282</span><span class="op">&gt;</span></span></a>(), <a class="pp" href="#many">many<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>many: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">1283</span>,<span class="op">$</span><span class="number">1282</span><span class="op">&gt;</span></span></a>))
</span>}

<span class="decl-fun" id="count_acc"><span class="kw">private</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#count_acc">count-acc<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>count<span class="dash">-</span>acc: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">acc</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp op">&lt;$</span><span class="number">810</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">811</span>,<span class="op">$</span><span class="number">810</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_parser"><span class="tp">parser</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parser: <span class="tp sp">(</span><span class="tp">E</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <span class="kw">if</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#con_space_True"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_lt__eq__1">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0</span>) <span class="kw">then</span> <a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp op">&lt;$</span><span class="number">810</span><span class="op">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#reverse">reverse<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>reverse: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">810</span></span></a> <span class="kw">=</span> <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">811</span>,<span class="op">$</span><span class="number">810</span><span class="op">&gt;</span></span></a>()
    <a class="pp" href="#count_acc">count-acc<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>count<span class="dash">-</span>acc: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">acc</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#unsafe_decreasing">unsafe-decreasing<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>decreasing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">1</span>), <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp op">$</span><span class="number">810</span></span></a>,<a class="pp">acc<span class="pc">acc: <span class="tp">list</span><span class="tp op">&lt;$</span><span class="number">810</span><span class="op">&gt;</span></span></a>), <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">811</span>,<span class="op">$</span><span class="number">810</span><span class="op">&gt;</span></span></a>)
  }  
</span>}

<span class="decl-fun" id="count"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#count">count<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>count: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">884</span>,<span class="op">$</span><span class="number">883</span><span class="op">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_parser"><span class="tp">parser</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parser: <span class="tp sp">(</span><span class="tp">E</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(&lt;|&gt;): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp" href="#count_acc">count-acc<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>count<span class="dash">-</span>acc: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">acc</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>, <a class="pp">p<span class="pc">p: <span class="tp">parser</span><span class="tp op">&lt;$</span><span class="number">884</span>,<span class="op">$</span><span class="number">883</span><span class="op">&gt;</span></span></a>)
</span>}

<span class="decl-fun" id="one_of_or"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#one_of_or">one-of-or<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>one<span class="dash">-</span>of<span class="dash">-</span>or: <span class="tp sp">(</span><span class="tp tpp">chars</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>( <a class="pp">chars<span class="pc">chars: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">default<span class="pc">default: <span class="tp">char</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> {
  <a class="pp" href="#optional">optional<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>optional: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">parser</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">parse</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>( <a class="pp">default<span class="pc">default: <span class="tp">char</span></span></a>){ <a class="pp" href="#one_of">one-of<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>one<span class="dash">-</span>of: <span class="tp sp">(</span><span class="tp tpp">chars</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">char</span></span></a>(<a class="pp">chars<span class="pc">chars: <span class="tp">string</span></span></a>) }
</span>}
<span class="comment">//private val rx-float	= regex(@"^([\-\+])?(\d+(?:\.\d+)?(?:[eE][\-\+]\d+)?)$")
//private val rx-hexfloat	= regex(@"^([\-\+]?0[xX][0-9a-fA-F]+)(?:\.([0-9a-fA-F]+))?(?:[pP]([\-\+]?\d+))?$")
</span>
<span class="decl-fun" id="hex_digits"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_parse.html#hex_digits">hex-digits<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>hex<span class="dash">-</span>digits: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">string</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_parse"><span class="tp">parse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>parse: <span class="tp">HX</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp" href="#chars_are">chars-are<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>parse<span class="fslash last">/</span></span>chars<span class="dash">-</span>are: <span class="tp sp">(</span><span class="tp tpp">msg</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">parse</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a>(<span class="st">"digit"</span>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#is_hex_digit">is-hex-digit<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>is<span class="dash">-</span>hex<span class="dash">-</span>digit: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> )<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#string_2">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">cs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a>
</span>}

<span class="comment">/&#42;
fun test(s : string, x : a, p : () -&gt; parse a ) : a {
  parse-eof(s.slice,p).maybe.default(x)
}
&#42;/</span>
</pre>

</body>
</html>
